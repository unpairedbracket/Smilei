
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Write a namelist &#8212; Smilei v3.3-453-g459e3616 documentation</title>
    <link rel="stylesheet" href="_static/smilei_theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/smileiIcon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Run" href="run.html" />
    <link rel="prev" title="Install" href="installation.html" />
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      scale: 95,
      availableFonts: ["TeX"]
    }
  });
  </script>
  
   

  </head><body>

<div id="smallScreenMenu" class="off">

    
    <div class="toctree-smilei">
        <ul>
          <li class="outer">
              <a href="licence.html">Licence</a>
          </li>
          <li class="outer">
              <a href="synopsis.html">Synopsis</a>
          </li>
          <li class="outer">
              <a href="highlights.html">Highlights</a>
          </li>
          <li class="outer">
              <a href="releases.html">Releases</a>
          </li>
        </ul>
        <hr />
        <ul>
          <li class="outer">
              <a href="units.html">Units</a>
          </li>
          <li class="outer">
              <a href="algorithms.html">PIC algorithms</a>
          </li>
          <li class="outer">
              <a href="parallelization.html">Parallelization basics</a>
          </li>
          <li class="outer">
              <a href="collisions.html">Binary collisions</a>
          </li>
          <li class="outer">
              <a href="field_ionization.html">Field ionization</a>
          </li>
          <li class="outer">
              <a href="radiation_loss.html">Synchrotron-like radiation reaction</a>
          </li>
          <li class="outer">
              <a href="multiphoton_Breit_Wheeler.html">Multiphoton Breit-Wheeler pair creation</a>
          </li>
        </ul>
        <hr />
        <ul>
          <li class="outer">
              <a href="installation.html">Install</a>
          </li>
        </ul>
            <ul>
<li><a class="reference internal" href="#">Write a namelist</a><ul>
<li><a class="reference internal" href="#general-rules">General rules</a></li>
<li><a class="reference internal" href="#python-workflow">Python workflow</a></li>
<li><a class="reference internal" href="#main-variables">Main variables</a></li>
<li><a class="reference internal" href="#load-balancing">Load Balancing</a></li>
<li><a class="reference internal" href="#moving-window">Moving window</a></li>
<li><a class="reference internal" href="#current-filtering">Current filtering</a></li>
<li><a class="reference internal" href="#field-filtering">Field filtering</a></li>
<li><a class="reference internal" href="#species">Species</a></li>
<li><a class="reference internal" href="#lasers">Lasers</a></li>
<li><a class="reference internal" href="#external-fields">External fields</a></li>
<li><a class="reference internal" href="#antennas">Antennas</a></li>
<li><a class="reference internal" href="#profiles">Profiles</a></li>
<li><a class="reference internal" href="#walls">Walls</a></li>
<li><a class="reference internal" href="#collisions">Collisions</a></li>
<li><a class="reference internal" href="#radiations-reaction">Radiations reaction</a></li>
<li><a class="reference internal" href="#multiphoton-breit-wheeler">Multiphoton Breit-Wheeler</a></li>
<li><a class="reference internal" href="#scalar-diagnostics"><em>Scalar</em> diagnostics</a></li>
<li><a class="reference internal" href="#fields-diagnostics"><em>Fields</em> diagnostics</a></li>
<li><a class="reference internal" href="#probe-diagnostics"><em>Probe</em> diagnostics</a></li>
<li><a class="reference internal" href="#particlebinning-diagnostics"><em>ParticleBinning</em> diagnostics</a></li>
<li><a class="reference internal" href="#screen-diagnostics"><em>Screen</em> diagnostics</a></li>
<li><a class="reference internal" href="#trackparticles-diagnostics"><em>TrackParticles</em> diagnostics</a></li>
<li><a class="reference internal" href="#performances-diagnostics"><em>Performances</em> diagnostics</a></li>
<li><a class="reference internal" href="#time-selections">Time selections</a></li>
<li><a class="reference internal" href="#checkpoints">Checkpoints</a></li>
<li><a class="reference internal" href="#variables-defined-by-smilei">Variables defined by Smilei</a></li>
</ul>
</li>
</ul>

        <ul>
          <li class="outer">
              <a href="run.html">Run</a>
          </li>
          <li class="outer">
              <a href="post-processing.html">Post-process</a>
          </li>
        </ul>
        <hr />
        <ul>
          <li class="outer">
              <a href="material.html">Publications</a>
          </li>
          <li class="outer">
              <a href="partners.html">Partners</a>
          </li>
          <li class="outer">
              <a href="https://smileipic.github.io/tutorials">Smilei tutorials</a>
          </li>
        </ul>
    </div>

</div>
<div id="hcontainer">
    <div id="nav_positioner">
        <div id="nav">
            <div id="nav_button" onclick="toggleNav()">
                Sections
            </div>
            <div id="nav_list" class="toctree-smilei">
                <div id="nav_title"><a href="#">Write a namelist</a></div>
                <ul>
<li><a class="reference internal" href="#">Write a namelist</a><ul>
<li><a class="reference internal" href="#general-rules">General rules</a></li>
<li><a class="reference internal" href="#python-workflow">Python workflow</a></li>
<li><a class="reference internal" href="#main-variables">Main variables</a></li>
<li><a class="reference internal" href="#load-balancing">Load Balancing</a></li>
<li><a class="reference internal" href="#moving-window">Moving window</a></li>
<li><a class="reference internal" href="#current-filtering">Current filtering</a></li>
<li><a class="reference internal" href="#field-filtering">Field filtering</a></li>
<li><a class="reference internal" href="#species">Species</a></li>
<li><a class="reference internal" href="#lasers">Lasers</a></li>
<li><a class="reference internal" href="#external-fields">External fields</a></li>
<li><a class="reference internal" href="#antennas">Antennas</a></li>
<li><a class="reference internal" href="#profiles">Profiles</a></li>
<li><a class="reference internal" href="#walls">Walls</a></li>
<li><a class="reference internal" href="#collisions">Collisions</a></li>
<li><a class="reference internal" href="#radiations-reaction">Radiations reaction</a></li>
<li><a class="reference internal" href="#multiphoton-breit-wheeler">Multiphoton Breit-Wheeler</a></li>
<li><a class="reference internal" href="#scalar-diagnostics"><em>Scalar</em> diagnostics</a></li>
<li><a class="reference internal" href="#fields-diagnostics"><em>Fields</em> diagnostics</a></li>
<li><a class="reference internal" href="#probe-diagnostics"><em>Probe</em> diagnostics</a></li>
<li><a class="reference internal" href="#particlebinning-diagnostics"><em>ParticleBinning</em> diagnostics</a></li>
<li><a class="reference internal" href="#screen-diagnostics"><em>Screen</em> diagnostics</a></li>
<li><a class="reference internal" href="#trackparticles-diagnostics"><em>TrackParticles</em> diagnostics</a></li>
<li><a class="reference internal" href="#performances-diagnostics"><em>Performances</em> diagnostics</a></li>
<li><a class="reference internal" href="#time-selections">Time selections</a></li>
<li><a class="reference internal" href="#checkpoints">Checkpoints</a></li>
<li><a class="reference internal" href="#variables-defined-by-smilei">Variables defined by Smilei</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    </div>
    
    <div class="headercolor">
    </div>
    <div class="hpositioner">
        <div class="header">
        <div class="logo">
            <a href="index.html">
                <img class="logo" src="_static/smileiLogo.svg" alt="Logo" />
            </a>
        </div>
        
    
            
        
        <div class="menu" id="menu_Licence">
            <div class="menuButton" onmouseenter="thisMenuOnly('menu_Licence')" onclick="toggleMenu('menu_Licence')" onmousedown="event.preventDefault()">
                <span>Overview</span>
            </div>
            <div class="off">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="licence.html">Licence</a>
                        </li>
                        <li class="outer">
                            <a href="synopsis.html">Synopsis</a>
                        </li>
                        <li class="outer">
                            <a href="highlights.html">Highlights</a>
                        </li>
                        <li class="outer">
                            <a href="releases.html">Releases</a>
                        </li>
            
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="menu" id="menu_Units">
            <div class="menuButton" onmouseenter="thisMenuOnly('menu_Units')" onclick="toggleMenu('menu_Units')" onmousedown="event.preventDefault()">
                <span>Understand</span>
            </div>
            <div class="off">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="units.html">Units</a>
                        </li>
                        <li class="outer">
                            <a href="algorithms.html">PIC algorithms</a>
                        </li>
                        <li class="outer">
                            <a href="parallelization.html">Parallelization basics</a>
                        </li>
                        <li class="outer">
                            <a href="collisions.html">Binary collisions</a>
                        </li>
                        <li class="outer">
                            <a href="field_ionization.html">Field ionization</a>
                        </li>
                        <li class="outer">
                            <a href="radiation_loss.html">Synchrotron-like radiation reaction</a>
                        </li>
                        <li class="outer">
                            <a href="multiphoton_Breit_Wheeler.html">Multiphoton Breit-Wheeler pair creation</a>
                        </li>
            
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="menu" id="menu_Install" style="font-weight:bold">
            <div class="menuButton" onmouseenter="thisMenuOnly('menu_Install')" onclick="toggleMenu('menu_Install')" onmousedown="event.preventDefault()">
                <span>Use</span>
            </div>
            <div class="off">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="installation.html">Install</a>
                        </li>
                        <li >
                            <a href="#">Write a namelist</a>
                        </li>
                        <li class="outer">
                            <a href="run.html">Run</a>
                        </li>
                        <li class="outer">
                            <a href="post-processing.html">Post-process</a>
                        </li>
            
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="menu" id="menu_Publications">
            <div class="menuButton" onmouseenter="thisMenuOnly('menu_Publications')" onclick="toggleMenu('menu_Publications')" onmousedown="event.preventDefault()">
                <span>More</span>
            </div>
            <div class="off">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="material.html">Publications</a>
                        </li>
                        <li class="outer">
                            <a href="partners.html">Partners</a>
                        </li>
                        <li class="outer">
                            <a href="https://smileipic.github.io/tutorials">Smilei tutorials</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div id="searchbox" role="search" style="display:none">
            <form class="search" action="search.html" method="get">
              <input type="text" name="q" placeholder="Search" id="searchinput" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
        
        <div id="searchicon" onclick="openSearch()" style="display:block">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 80 120">
              <g transform="translate(0,-932.36216)" >
                <circle
                   r="25" cy="977.51044" cx="38.078663"
                   style="opacity:1;fill:none;stroke:#ffffff;stroke-width:10;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
                <rect
                   transform="matrix(0.36717877,0.93015039,-0.93427297,0.35655858,0,0)"
                   rx="4.9996676" ry="7.4995141"
                   y="316.16959" x="947.6142"
                   height="14.117695" width="46.476151"
                   style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:none;" />
                <path
                   d="m 41.383282,962.25996 a 15,15 0 0 1 11.660107,11.6355"
                   style="opacity:1;fill:none;stroke:#ffffff;stroke-width:3;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
              </g>
            </svg>
        </div>
        <div id="closesearchicon" onclick="closeSearch()" style="display:none">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 80 120">
              <g
                 transform="translate(0,-932.36216)">
                <path
                   d="m 10,962.36216 60,60.00004"
                   style="fill:none;stroke:#ffffff;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
                <path
                   d="M 70,962.36216 10,1022.3622"
                   style="fill:none;stroke:#ffffff;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
              </g>
            </svg>
        </div>
        
        <div id="smallScreenMenuButton" onclick="toggleSmallScreenMenu()">
            <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"
               viewBox="-20 -20 140 140">
              <g  style="fill:#ffffff;stroke:none;">
                <circle cx="15" cy="20" r="5" />
                <circle cx="35" cy="20" r="5" />
                <circle cx="85" cy="20" r="5" />
                <rect width="50" height="10" x="35" y="15" rx="0" ry="0" />
                <circle cx="15" cy="40" r="5" />
                <circle cx="35" cy="40" r="5" />
                <circle cx="85" cy="40" r="5" />
                <rect width="50" height="10" x="35" y="35" rx="0" ry="0" />
                <circle cx="15" cy="60" r="5" />
                <circle cx="35" cy="60" r="5" />
                <circle cx="85" cy="60" r="5" />
                <rect width="50" height="10" x="35" y="55" rx="0" ry="0" />
                <circle cx="15" cy="80" r="5" />
                <circle cx="35" cy="80" r="5" />
                <circle cx="85" cy="80" r="5" />
                <rect width="50" height="10" x="35" y="75" rx="0" ry="0" />
              </g>
            </svg>
        </div>
        
    </div>
    
</div>
</div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="run.html" title="Run"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Install"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Smilei v3.3-453-g459e3616 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
  <div class="section" id="write-a-namelist">
<h1>Write a namelist<a class="headerlink" href="#write-a-namelist" title="Permalink to this headline">¶</a></h1>
<p>Before you run <strong class="program">Smilei</strong>, you need a <em>namelist</em> (an input file). The namelist
is written in the <em>python</em> language. It is thus recommended to know the basics of <em>python</em>.</p>
<p>We suggest you copy one existing namelist from the folder <em>benchmarks</em>.
All namelists have the extension <code class="docutils literal notranslate"><span class="pre">.py</span></code>.</p>
<hr class="docutils" />
<div class="section" id="general-rules">
<h2>General rules<a class="headerlink" href="#general-rules" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong class="program">Smilei</strong> requires a few <em>blocks</em> to be defined, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Main</span><span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>         <span class="c1"># defines the timestep value</span>
    <span class="n">grid_length</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">],</span> <span class="c1"># defines the 2D box dimensions</span>
    <span class="c1"># ...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Outside blocks, you can calculate anything you require.
Inside a block, you must only define variables for <strong class="program">Smilei</strong>.</p>
</li>
<li><p class="first">The <em>python</em> syntax requires special indentation of each line.
You begin with no indentation, but you have to <strong>add four spaces at the
beginning of lines inside a group</strong>, and so on.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.3</span>
</pre></div>
</div>
</li>
<li><p class="first">You will need to use <a class="reference external" href="https://docs.python.org/2/tutorial/introduction.html#lists">lists</a>,
which are series of things in <em>python</em>,
defined between brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> and separated by commas.
For example, <code class="docutils literal notranslate"><span class="pre">mean_velocity</span> <span class="pre">=</span> <span class="pre">[0.,</span> <span class="pre">1.1,</span> <span class="pre">3.]</span></code>.</p>
</li>
<li><p class="first">You are free to import any installed <em>python</em> package into the namelist.
For instance, you may obtain <span class="math notranslate">\(\pi\)</span> using <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">math</span> <span class="pre">import</span> <span class="pre">pi</span></code>.</p>
</li>
<li><p class="first">All quantities are normalized to arbitrary values: see <a class="reference internal" href="units.html"><span class="doc">Units</span></a>.</p>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="python-workflow">
<h2>Python workflow<a class="headerlink" href="#python-workflow" title="Permalink to this headline">¶</a></h2>
<p><em>Python</em> is started at the beginning of the simulation (one <em>python</em> interpreter
for each MPI process). The following steps are executed:</p>
<ol class="arabic simple">
<li>A few variables from <strong class="program">Smilei</strong> are passed to <em>python</em> so that they are
available to the user:<ul>
<li>The rank of the current MPI process as <a class="reference internal" href="#smilei_mpi_rank" title="smilei_mpi_rank"><code class="xref py py-data docutils literal notranslate"><span class="pre">smilei_mpi_rank</span></code></a>.</li>
<li>The total number of MPI processes as <a class="reference internal" href="#smilei_mpi_size" title="smilei_mpi_size"><code class="xref py py-data docutils literal notranslate"><span class="pre">smilei_mpi_size</span></code></a>.</li>
<li>The maximum random integer as <a class="reference internal" href="#smilei_rand_max" title="smilei_rand_max"><code class="xref py py-data docutils literal notranslate"><span class="pre">smilei_rand_max</span></code></a>.</li>
</ul>
</li>
<li>The namelist(s) is executed.</li>
<li><em>Python</em> runs <code class="xref py py-data docutils literal notranslate"><span class="pre">cleanup()</span></code> if the user has defined it
(this can be a good place to delete unused heavy variables and unload unused modules).</li>
<li><em>Python</em> checks whether the <em>python</em> interpreter is needed during the simulation
(e.g. the user has defined a temporal <a class="reference internal" href="#profiles"><span class="std std-ref">profile</span></a> which requires <em>python</em>
to calculate it every timestep). Otherwise, <em>python</em> is stopped.</li>
</ol>
<p>All these instructions are summarized in a file <code class="docutils literal notranslate"><span class="pre">smilei.py</span></code>,
so that the user can directly run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-i</span> <span class="pre">smilei.py</span></code> for post-processing purposes.</p>
</div>
<hr class="docutils" />
<div class="section" id="main-variables">
<h2>Main variables<a class="headerlink" href="#main-variables" title="Permalink to this headline">¶</a></h2>
<p>The block <code class="docutils literal notranslate"><span class="pre">Main</span></code> is <strong>mandatory</strong> and has the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Main</span><span class="p">(</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="s2">&quot;1Dcartesian&quot;</span><span class="p">,</span>
    <span class="n">interpolation_order</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">grid_length</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">16.</span> <span class="p">],</span>
    <span class="n">cell_length</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">],</span>
    <span class="n">simulation_time</span>    <span class="o">=</span> <span class="mf">15.</span><span class="p">,</span>
    <span class="n">timestep</span>    <span class="o">=</span> <span class="mf">0.005</span><span class="p">,</span>
    <span class="n">number_of_patches</span> <span class="o">=</span> <span class="p">[</span><span class="mi">64</span><span class="p">],</span>
    <span class="n">clrw</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">maxwell_solver</span> <span class="o">=</span> <span class="s1">&#39;Yee&#39;</span><span class="p">,</span>
    <span class="n">EM_boundary_conditions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;silver-muller&quot;</span><span class="p">,</span> <span class="s2">&quot;silver-muller&quot;</span><span class="p">],</span>
<span class="c1">#        [&quot;silver-muller&quot;, &quot;silver-muller&quot;],</span>
<span class="c1">#        [&quot;silver-muller&quot;, &quot;silver-muller&quot;],</span>
    <span class="p">],</span>
    <span class="n">time_fields_frozen</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">reference_angular_frequency_SI</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">print_every</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">random_seed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="geometry">
<code class="descname">geometry</code><a class="headerlink" href="#geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>The geometry of the simulation: <code class="docutils literal notranslate"><span class="pre">&quot;1Dcartesian&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;2Dcartesian&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;3Dcartesian&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="interpolation_order">
<code class="descname">interpolation_order</code><a class="headerlink" href="#interpolation_order" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">2</td>
</tr>
</tbody>
</table>
<p>Interpolation order. To this day, only <code class="docutils literal notranslate"><span class="pre">2</span></code> is available.</p>
</dd></dl>

<dl class="data">
<dt id="grid_length">
<code class="descname">grid_length</code><a class="headerlink" href="#grid_length" title="Permalink to this definition">¶</a></dt>
<dt id="number_of_cells">
<code class="descname">number_of_cells</code><a class="headerlink" href="#number_of_cells" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>A list of numbers: size of the simulation box for each dimension of the simulation.</dt>
<dd><ul class="first last simple">
<li>Either <code class="docutils literal notranslate"><span class="pre">grid_length</span></code>, the simulation length in each direction in units of <span class="math notranslate">\(L_r\)</span>,</li>
<li>or <code class="docutils literal notranslate"><span class="pre">number_of_cells</span></code>, the number of cells in each direction.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="cell_length">
<code class="descname">cell_length</code><a class="headerlink" href="#cell_length" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of floats: sizes of one cell in each direction in units of <span class="math notranslate">\(L_r\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="simulation_time">
<code class="descname">simulation_time</code><a class="headerlink" href="#simulation_time" title="Permalink to this definition">¶</a></dt>
<dt id="number_of_timesteps">
<code class="descname">number_of_timesteps</code><a class="headerlink" href="#number_of_timesteps" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Duration of the simulation.</dt>
<dd><ul class="first last simple">
<li>Either <code class="docutils literal notranslate"><span class="pre">simulation_time</span></code>, the simulation duration in units of <span class="math notranslate">\(T_r\)</span>,</li>
<li>or <code class="docutils literal notranslate"><span class="pre">number_of_timesteps</span></code>, the total number of timesteps.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="timestep">
<code class="descname">timestep</code><a class="headerlink" href="#timestep" title="Permalink to this definition">¶</a></dt>
<dt id="timestep_over_CFL">
<code class="descname">timestep_over_CFL</code><a class="headerlink" href="#timestep_over_CFL" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Duration of one timestep.</dt>
<dd><ul class="first last simple">
<li>Either <code class="docutils literal notranslate"><span class="pre">timestep</span></code>, in units of <span class="math notranslate">\(T_r\)</span>,</li>
<li>or <code class="docutils literal notranslate"><span class="pre">timestep_over_CFL</span></code>, in units of the <em>Courant–Friedrichs–Lewy</em> (CFL) time.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="number_of_patches">
<code class="descname">number_of_patches</code><a class="headerlink" href="#number_of_patches" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of integers: the number of patches in each direction.
Each integer must be a power of 2, and the total number of patches must be
greater or equal than the number of MPI processes.
See <a class="reference internal" href="parallelization.html"><span class="doc">Parallelization basics</span></a>.</p>
</dd></dl>

<dl class="data">
<dt id="clrw">
<code class="descname">clrw</code><a class="headerlink" href="#clrw" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">set to minimize the memory footprint of the particles pusher, especially interpolation and projection processes</td>
</tr>
</tbody>
</table>
<p>Advanced users. Integer specifying the cluster width along X direction in number of cells.
The “cluster” is a sub-patch structure in which particles are sorted for cache improvement.
clrw must divide the number of cells in one patch (in dimension X).
The finest sorting is achieved with clrw=1 and no sorting with clrw equal to the full size of a patch along dimension X.
The cluster size in dimension Y and Z is always the full extent of the patch.</p>
</dd></dl>

<dl class="data">
<dt id="maxwell_solver">
<code class="descname">maxwell_solver</code><a class="headerlink" href="#maxwell_solver" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">‘Yee’</td>
</tr>
</tbody>
</table>
<p>The solver for Maxwell’s equations. Only <code class="docutils literal notranslate"><span class="pre">&quot;Yee&quot;</span></code> is available for all geometries at the moment. <code class="docutils literal notranslate"><span class="pre">&quot;Cowan&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Grassi&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Lehe&quot;</span></code>
are available for 2DCartesian and <code class="docutils literal notranslate"><span class="pre">&quot;Lehe&quot;</span></code> is available for 3DCartesian. Lehe solver is described in this <a class="reference external" href="https://journals.aps.org/prab/abstract/10.1103/PhysRevSTAB.16.021301">paper</a></p>
</dd></dl>

<dl class="data">
<dt id="solve_poisson">
<code class="descname">solve_poisson</code><a class="headerlink" href="#solve_poisson" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">True</td>
</tr>
</tbody>
</table>
<p>Decides if Poisson correction must be applied or not initially.</p>
</dd></dl>

<dl class="data">
<dt id="poisson_max_iteration">
<code class="descname">poisson_max_iteration</code><a class="headerlink" href="#poisson_max_iteration" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">50000</td>
</tr>
</tbody>
</table>
<p>Maximum number of iteration for the Poisson solver.</p>
</dd></dl>

<dl class="data">
<dt id="poisson_max_error">
<code class="descname">poisson_max_error</code><a class="headerlink" href="#poisson_max_error" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-14</td>
</tr>
</tbody>
</table>
<p>Maximum error for the Poisson solver.</p>
</dd></dl>

<dl class="data">
<dt id="EM_boundary_conditions">
<code class="descname">EM_boundary_conditions</code><a class="headerlink" href="#EM_boundary_conditions" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">list of lists of strings</td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[[&quot;periodic&quot;]]</span></code></td>
</tr>
</tbody>
</table>
<p>The boundary conditions for the electromagnetic fields. Each boundary may have one of
the following conditions: <code class="docutils literal notranslate"><span class="pre">&quot;periodic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;silver-muller&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;reflective&quot;</span></code>.</p>
<div class="line-block">
<div class="line"><strong>Syntax 1:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_all]]</span></code>, identical for all boundaries.</div>
<div class="line"><strong>Syntax 2:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_X],</span> <span class="pre">[bc_Y],</span> <span class="pre">...]</span></code>, different depending on x, y or z.</div>
<div class="line"><strong>Syntax 3:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_Xmin,</span> <span class="pre">bc_Xmax],</span> <span class="pre">...]</span></code>,  different on each boundary.</div>
</div>
</dd></dl>

<dl class="data">
<dt id="time_fields_frozen">
<code class="descname">time_fields_frozen</code><a class="headerlink" href="#time_fields_frozen" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>Time, at the beginning of the simulation, during which fields are frozen.</p>
</dd></dl>

<span class="target" id="reference-angular-frequency-si"></span><dl class="data">
<dt id="reference_angular_frequency_SI">
<code class="descname">reference_angular_frequency_SI</code><a class="headerlink" href="#reference_angular_frequency_SI" title="Permalink to this definition">¶</a></dt>
<dd><p>The value of the reference angular frequency <span class="math notranslate">\(\omega_r\)</span> in SI units,
<strong>only needed when collisions, ionization, radiation losses
or multiphoton Breit-Wheeler pair creation are requested</strong>.
This frequency is related to the normalization length according to <span class="math notranslate">\(L_r\omega_r = c\)</span>
(see <a class="reference internal" href="units.html"><span class="doc">Units</span></a>).</p>
</dd></dl>

<dl class="data">
<dt id="print_every">
<code class="descname">print_every</code><a class="headerlink" href="#print_every" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of timesteps between each info output on screen. By default, 10 outputs per
simulation.</p>
</dd></dl>

<dl class="data">
<dt id="print_expected_disk_usage">
<code class="descname">print_expected_disk_usage</code><a class="headerlink" href="#print_expected_disk_usage" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><cite>True</cite></td>
</tr>
</tbody>
</table>
<p>If <cite>False</cite>, the calculation of the expected disk usage, that is usually printed in the
standard output, is skipped. This might be useful in rare cases where this calculation
is costly.</p>
</dd></dl>

<dl class="data">
<dt id="random_seed">
<code class="descname">random_seed</code><a class="headerlink" href="#random_seed" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">the machine clock</td>
</tr>
</tbody>
</table>
<p>The value of the random seed. To create a per-processor random seed, you may use
the variable  <a class="reference internal" href="#smilei_mpi_rank" title="smilei_mpi_rank"><code class="xref py py-data docutils literal notranslate"><span class="pre">smilei_mpi_rank</span></code></a>.</p>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="load-balancing">
<h2>Load Balancing<a class="headerlink" href="#load-balancing" title="Permalink to this headline">¶</a></h2>
<p>Load balancing (explained <a class="reference internal" href="parallelization.html#loadbalancingexplanation"><span class="std std-ref">here</span></a>) consists in exchanging
patches (domains of the simulation box) between MPI processes to reduce the
computational load imbalance.
The block <code class="docutils literal notranslate"><span class="pre">LoadBalancing</span></code> is optional. If you do not define it, load balancing will
occur every 150 iterations.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LoadBalancing</span><span class="p">(</span>
    <span class="n">initial_balance</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span>
    <span class="n">cell_load</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">frozen_particle_load</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="initial_balance">
<code class="descname">initial_balance</code><a class="headerlink" href="#initial_balance" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">True</td>
</tr>
</tbody>
</table>
<p>Decides if the load must be balanced at initialization. If not, the same amount of
patches will be attributed to each MPI rank.</p>
</dd></dl>

<dl class="data">
<dt id="every">
<code class="descname">every</code><a class="headerlink" href="#every" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">150</td>
</tr>
</tbody>
</table>
<p>Number of timesteps between each load balancing <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.
The value <code class="docutils literal notranslate"><span class="pre">0</span></code> suppresses all load balancing.</p>
</dd></dl>

<dl class="data">
<dt id="cell_load">
<code class="descname">cell_load</code><a class="headerlink" href="#cell_load" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>Computational load of a single grid cell considered by the dynamic load balancing algorithm.
This load is normalized to the load of a single particle.</p>
</dd></dl>

<dl class="data">
<dt id="frozen_particle_load">
<code class="descname">frozen_particle_load</code><a class="headerlink" href="#frozen_particle_load" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0.1</td>
</tr>
</tbody>
</table>
<p>Computational load of a single frozen particle considered by the dynamic load balancing algorithm.
This load is normalized to the load of a single particle.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="moving-window">
<span id="movingwindow"></span><h2>Moving window<a class="headerlink" href="#moving-window" title="Permalink to this headline">¶</a></h2>
<p>The block <code class="docutils literal notranslate"><span class="pre">MovingWindow</span></code> is optional. The window does not move it you do not define it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MovingWindow</span><span class="p">(</span>
    <span class="n">time_start</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">velocity_x</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="time_start">
<code class="descname">time_start</code><a class="headerlink" href="#time_start" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The time at which the window starts moving.</p>
</dd></dl>

<dl class="data">
<dt id="velocity_x">
<code class="descname">velocity_x</code><a class="headerlink" href="#velocity_x" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The velocity of the moving window in the <cite>x</cite> direction.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#diagparticlebinning"><span class="std std-ref">particle binning diagnostics</span></a> accept an “axis” called <code class="docutils literal notranslate"><span class="pre">moving_x</span></code>
corresponding to the <cite>x</cite> coordinate corrected by the moving window’s current movement.</p>
</div>
<hr class="docutils" />
</div>
<div class="section" id="current-filtering">
<span id="currentfilter"></span><h2>Current filtering<a class="headerlink" href="#current-filtering" title="Permalink to this headline">¶</a></h2>
<p>The present version of <strong class="program">Smilei</strong> provides one method for current filtering,
which parameters are controlled in the following block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CurrentFilter</span><span class="p">(</span>
    <span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;binomial&quot;</span><span class="p">,</span>
    <span class="n">passes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="model">
<code class="descname">model</code><a class="headerlink" href="#model" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;binomial&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>The model for current filtering. Presently, only <code class="docutils literal notranslate"><span class="pre">&quot;binomial&quot;</span></code> current filtering is available.</p>
</dd></dl>

<dl class="data">
<dt id="passes">
<code class="descname">passes</code><a class="headerlink" href="#passes" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">0</span></code></td>
</tr>
</tbody>
</table>
<p>The number of passes in the filter at each timestep.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="field-filtering">
<span id="fieldfilter"></span><h2>Field filtering<a class="headerlink" href="#field-filtering" title="Permalink to this headline">¶</a></h2>
<p>The present version of <strong class="program">Smilei</strong> provides one method for field filtering,
which parameters are controlled in the following block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FieldFilter</span><span class="p">(</span>
    <span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;Friedman&quot;</span><span class="p">,</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">model</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;Friedman&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>The model for field filtering. Presently, only <code class="docutils literal notranslate"><span class="pre">&quot;Friedman&quot;</span></code> field filtering is available.</p>
</dd></dl>

<dl class="data">
<dt id="theta">
<code class="descname">theta</code><a class="headerlink" href="#theta" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">0.</span></code></td>
</tr>
</tbody>
</table>
<p>The <span class="math notranslate">\(\theta\)</span> parameter (between 0 and 1) of Friedman’s method.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="species">
<span id="id1"></span><h2>Species<a class="headerlink" href="#species" title="Permalink to this headline">¶</a></h2>
<p>Each species has to be defined in a <code class="docutils literal notranslate"><span class="pre">Species</span></code> block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Species</span><span class="p">(</span>
    <span class="n">name</span>      <span class="o">=</span> <span class="s2">&quot;electrons1&quot;</span><span class="p">,</span>
    <span class="n">position_initialization</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="n">momentum_initialization</span> <span class="o">=</span> <span class="s2">&quot;maxwell-juettner&quot;</span><span class="p">,</span>
    <span class="n">particles_per_cell</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">mass</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">atomic_number</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">number_density</span> <span class="o">=</span> <span class="mf">10.</span><span class="p">,</span>
    <span class="c1"># charge_density = None,</span>
    <span class="n">charge</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>
    <span class="n">mean_velocity</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span>
    <span class="n">temperature</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-10</span><span class="p">],</span>
    <span class="n">boundary_conditions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;reflective&quot;</span><span class="p">,</span> <span class="s2">&quot;reflective&quot;</span><span class="p">],</span>
    <span class="c1">#    [&quot;periodic&quot;, &quot;periodic&quot;],</span>
    <span class="c1">#    [&quot;periodic&quot;, &quot;periodic&quot;],</span>
    <span class="p">],</span>
    <span class="c1"># thermal_boundary_temperature = None,</span>
    <span class="c1"># thermal_boundary_velocity = None,</span>
    <span class="n">time_frozen</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="c1"># ionization_model = &quot;none&quot;,</span>
    <span class="c1"># ionization_electrons = None,</span>
    <span class="n">is_test</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">c_part_max</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">pusher</span> <span class="o">=</span> <span class="s2">&quot;boris&quot;</span><span class="p">,</span>

    <span class="c1"># Radiation reaction, for particles only:</span>
    <span class="n">radiation_model</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="n">radiation_photon_species</span> <span class="o">=</span> <span class="s2">&quot;photon&quot;</span><span class="p">,</span>
    <span class="n">radiation_photon_sampling</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">radiation_photon_gamma_threshold</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>

    <span class="c1"># For photon species only:</span>
    <span class="n">multiphoton_Breit_Wheeler</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron&quot;</span><span class="p">,</span><span class="s2">&quot;positron&quot;</span><span class="p">],</span>
    <span class="n">multiphoton_Breit_Wheeler_sampling</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="name">
<code class="descname">name</code><a class="headerlink" href="#name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name you want to give to this species.</p>
</dd></dl>

<dl class="data">
<dt id="position_initialization">
<code class="descname">position_initialization</code><a class="headerlink" href="#position_initialization" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>The initialization of particle positions:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;regular&quot;</span></code> for regularly spaced</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;random&quot;</span></code> for randomly distributed</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;centered&quot;</span></code> for centered in each cell</li>
</ul>
<p>You can also decide to initialize species particles on another species particles (“targeted species”). In this case, replace one of the previous option by the name of the “targeted” species. For example, you want initialize position “electron” on randomly distributed “ion”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Species</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;ion&quot;</span><span class="p">,</span>
    <span class="n">position_initialization</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>

<span class="n">Species</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;electron&quot;</span><span class="p">,</span>
    <span class="n">position_initialization</span> <span class="o">=</span> <span class="s2">&quot;ion&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><span class="red">Warning</span> Target species have to be initialize with “random”,”centered” or “regular”</p>
<p><span class="red">Warning</span> The number of first species particles have to be the same of the second species particles</p>
</dd></dl>

<dl class="data">
<dt id="momentum_initialization">
<code class="descname">momentum_initialization</code><a class="headerlink" href="#momentum_initialization" title="Permalink to this definition">¶</a></dt>
<dd><p>The initialization of particle momenta:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;maxwell-juettner&quot;</span></code> for a relativistic maxwellian (see <a class="reference internal" href="maxwell-juttner.html"><span class="doc">how it is done</span></a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;rectangular&quot;</span></code> for a rectangular distribution</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;cold&quot;</span></code> for zero temperature</li>
</ul>
<p>The first 2 distributions depend on the parameter <a class="reference internal" href="#temperature" title="temperature"><code class="xref py py-data docutils literal notranslate"><span class="pre">temperature</span></code></a> explained below.</p>
</dd></dl>

<dl class="data">
<dt id="particles_per_cell">
<code class="descname">particles_per_cell</code><a class="headerlink" href="#particles_per_cell" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The number of particles per cell.</p>
</dd></dl>

<dl class="data">
<dt id="mass">
<code class="descname">mass</code><a class="headerlink" href="#mass" title="Permalink to this definition">¶</a></dt>
<dd><p>The mass of particles, in units of the electron mass <span class="math notranslate">\(m_e\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="atomic_number">
<code class="descname">atomic_number</code><a class="headerlink" href="#atomic_number" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0</td>
</tr>
</tbody>
</table>
<p>The atomic number of the particles, required only for ionization.
It must be lower than 101.</p>
</dd></dl>

<dl class="data">
<dt id="number_density">
<code class="descname">number_density</code><a class="headerlink" href="#number_density" title="Permalink to this definition">¶</a></dt>
<dt id="charge_density">
<code class="descname">charge_density</code><a class="headerlink" href="#charge_density" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The absolute value of the number density or charge density (choose one only)
of the particle distribution, in units of the reference density <span class="math notranslate">\(N_r\)</span> (see <a class="reference internal" href="units.html"><span class="doc">Units</span></a>).</p>
</dd></dl>

<dl class="data">
<dt id="charge">
<code class="descname">charge</code><a class="headerlink" href="#charge" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The particle charge, in units of the elementary charge <span class="math notranslate">\(e\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="mean_velocity">
<code class="descname">mean_velocity</code><a class="headerlink" href="#mean_velocity" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a list of 3 floats or <em>python</em> functions (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The initial drift velocity of the particles, in units of the speed of light <span class="math notranslate">\(c\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="temperature">
<code class="descname">temperature</code><a class="headerlink" href="#temperature" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a list of 3 floats or <em>python</em> functions (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The initial temperature of the particles, in units of <span class="math notranslate">\(m_ec^2\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="boundary_conditions">
<code class="descname">boundary_conditions</code><a class="headerlink" href="#boundary_conditions" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a list of lists of strings</td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[[&quot;periodic&quot;]]</span></code></td>
</tr>
</tbody>
</table>
<p>The boundary conditions for the particles of this species.
Each boundary may have one of the following conditions:
<code class="docutils literal notranslate"><span class="pre">&quot;periodic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflective&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;remove&quot;</span></code> (particles are deleted),
<code class="docutils literal notranslate"><span class="pre">&quot;stop&quot;</span></code> (particle momenta are set to 0), and <code class="docutils literal notranslate"><span class="pre">&quot;thermalize&quot;</span></code>.
For photon species (<code class="docutils literal notranslate"><span class="pre">mass=0</span></code>), the last two options are not available.</p>
<div class="line-block">
<div class="line"><strong>Syntax 1:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_all]]</span></code>, identical for all boundaries.</div>
<div class="line"><strong>Syntax 2:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_X],</span> <span class="pre">[bc_Y],</span> <span class="pre">...]</span></code>, different depending on x, y or z.</div>
<div class="line"><strong>Syntax 3:</strong> <code class="docutils literal notranslate"><span class="pre">[[bc_Xmin,</span> <span class="pre">bc_Xmax],</span> <span class="pre">...]</span></code>,  different on each boundary.</div>
</div>
</dd></dl>

<dl class="data">
<dt id="thermal_boundary_temperature">
<code class="descname">thermal_boundary_temperature</code><a class="headerlink" href="#thermal_boundary_temperature" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p>A list of floats representing the temperature of the thermal boundaries (those set to
<code class="docutils literal notranslate"><span class="pre">&quot;thermalize&quot;</span></code> in  <a class="reference internal" href="#boundary_conditions" title="boundary_conditions"><code class="xref py py-data docutils literal notranslate"><span class="pre">boundary_conditions</span></code></a>) for each spatial coordinate.
Currently, only the first coordinate (x) is taken into account.</p>
</dd></dl>

<dl class="data">
<dt id="thermal_boundary_velocity">
<code class="descname">thermal_boundary_velocity</code><a class="headerlink" href="#thermal_boundary_velocity" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">[]</td>
</tr>
</tbody>
</table>
<p>A list of floats representing the components of the drift velocity of
the thermal boundaries (those set to <code class="docutils literal notranslate"><span class="pre">&quot;thermalize&quot;</span></code> in <a class="reference internal" href="#boundary_conditions" title="boundary_conditions"><code class="xref py py-data docutils literal notranslate"><span class="pre">boundary_conditions</span></code></a>).</p>
</dd></dl>

<dl class="data">
<dt id="time_frozen">
<code class="descname">time_frozen</code><a class="headerlink" href="#time_frozen" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The time during which the particle positions are not updated, in units of <span class="math notranslate">\(T_r\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="ionization_model">
<code class="descname">ionization_model</code><a class="headerlink" href="#ionization_model" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>The model for field ionization. Currently, only <code class="docutils literal notranslate"><span class="pre">&quot;tunnel&quot;</span></code> is available.
See <a class="reference internal" href="#collisionalionization"><span class="std std-ref">this</span></a> for collisional ionization instead.</p>
</dd></dl>

<dl class="data">
<dt id="ionization_electrons">
<code class="descname">ionization_electrons</code><a class="headerlink" href="#ionization_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the electron species that field ionization uses when creating new electrons.</p>
</dd></dl>

<dl class="data">
<dt id="is_test">
<code class="descname">is_test</code><a class="headerlink" href="#is_test" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">False</span></code></td>
</tr>
</tbody>
</table>
<p>Flag for test particles. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this species will contain only test particles
which do not participate in the charge and currents.</p>
</dd></dl>

<dl class="data">
<dt id="c_part_max">
<code class="descname">c_part_max</code><a class="headerlink" href="#c_part_max" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="red">to do</span></p>
</dd></dl>

<dl class="data">
<dt id="pusher">
<code class="descname">pusher</code><a class="headerlink" href="#pusher" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;boris&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Type of pusher to be used for this species. The default value corresponds to the
relativistic Boris pusher. Smilei has the following solvers implemented:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;boris&quot;</span></code>: The relativistic Boris pusher</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;borisnr&quot;</span></code>: The non-relativistic Boris pusher</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;vay&quot;</span></code>: The relativistic pusher of J. L. Vay</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;higueracary&quot;</span></code>: The relativistic pusher of A. V. Higuera and J. R. Cary</li>
</ul>
<p>For photon species, the only pusher available is <code class="docutils literal notranslate"><span class="pre">&quot;norm&quot;</span></code> and corresponds to
a rectilinear propagation.</p>
</dd></dl>

<dl class="data">
<dt id="radiation_model">
<code class="descname">radiation_model</code><a class="headerlink" href="#radiation_model" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Radiation reaction model used for this species (see <a class="reference internal" href="radiation_loss.html"><span class="doc">Synchrotron-like radiation reaction</span></a>).
No radiation is actually emitted, unless you use the <code class="docutils literal notranslate"><span class="pre">&quot;Monte-Carlo&quot;</span></code> model
and you define <a class="reference internal" href="#radiation_photon_species" title="radiation_photon_species"><code class="xref py py-data docutils literal notranslate"><span class="pre">radiation_photon_species</span></code></a>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code>: no radiation</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;Landau-Lifshitz&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">ll</span></code>): Landau-Lifshitz model approximated for high energies</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;corrected-Landau-Lifshitz&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">cll</span></code>): with quantum correction</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&quot;Niel&quot;</span></code>: a <a class="reference external" href="https://arxiv.org/abs/1707.02618">stochastic radiation model</a> based on the work of Niel <cite>et al.</cite>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;Monte-Carlo&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">mc</span></code>): Monte-Carlo radiation model. This model can be configured to generate macro-photons with <a class="reference internal" href="#radiation_photon_species" title="radiation_photon_species"><code class="xref py py-data docutils literal notranslate"><span class="pre">radiation_photon_species</span></code></a>.</li>
</ul>
<p><span class="red">This parameter cannot be assigned to photons (mass=0).</span></p>
</dd></dl>

<dl class="data">
<dt id="radiation_photon_species">
<code class="descname">radiation_photon_species</code><a class="headerlink" href="#radiation_photon_species" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
<p><span class="red">This parameter is an attribute of particle species only (mass&gt;0).</span></p>
<p>This parameter determines whether the Monte-Carlo <code class="xref py py-data docutils literal notranslate"><span class="pre">radiation</span> <span class="pre">model</span></code>
will generate macro-photons. By default, the photon species is set to <code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code>
meaning that no macro-photon will be created. To set the macro-photon generation,
a photon species (<code class="docutils literal notranslate"><span class="pre">mass</span> <span class="pre">=</span> <span class="pre">0</span></code>) has to be created after the particle species
(<code class="docutils literal notranslate"><span class="pre">mass</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>) and the parameter <code class="docutils literal notranslate"><span class="pre">radiation_photon_species</span></code> set to this
photon species name.</p>
<p><span class="red">This parameter cannot be assigned to photons (mass=0).</span></p>
</dd></dl>

<dl class="data">
<dt id="radiation_photon_sampling">
<code class="descname">radiation_photon_sampling</code><a class="headerlink" href="#radiation_photon_sampling" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">1</span></code></td>
</tr>
</tbody>
</table>
<p>When the macro-photon creation is activated
(<a class="reference internal" href="#radiation_photon_species" title="radiation_photon_species"><code class="xref py py-data docutils literal notranslate"><span class="pre">radiation_photon_species</span></code></a> set to one of the defined photon species),
this parameter is the number of macro-photons generated per emission event.
By default, a single macro-photon is created per emission but in order to
improve the photon statistics, one can decide to increase this number.
The weight of each photon is therefore the emitting particle one divided
by this number.
Obviously, this parameter can not be below 1. Note that a large number will
rapidly slow down the application performance and can lead to memory
saturation.</p>
<p><span class="red">This parameter cannot be assigned to photons (mass=0).</span></p>
</dd></dl>

<dl class="data">
<dt id="radiation_photon_gamma_threshold">
<code class="descname">radiation_photon_gamma_threshold</code><a class="headerlink" href="#radiation_photon_gamma_threshold" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">2</span></code></td>
</tr>
</tbody>
</table>
<p>Threshold on the photon energy for the macro-photon emission when using the
radiation reaction Monte-Carlo process.
Under this threshold, the macro-photon from the radiation reaction Monte-Carlo
process is not created but taken anyway into account in the energy balance.
The default value corresponds to twice the electron rest mass energy that
is the required energy to decay into electron-positron pairs.</p>
<p><span class="red">This parameter cannot be assigned to photons (mass=0).</span></p>
</dd></dl>

<dl class="data">
<dt id="multiphoton_Breit_Wheeler">
<code class="descname">multiphoton_Breit_Wheeler</code><a class="headerlink" href="#multiphoton_Breit_Wheeler" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[None,None]</span></code></td>
</tr>
</tbody>
</table>
<p><span class="red">This parameter is an attribute of photon species only (mass=0).</span></p>
<p>This entry is an
array of two strings respectively corresponding to one for the previously
defined electron and the positron species.
By default, <code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code> means that the process is not activated.
To activate the multiphoton Breit-Wheeler pair creation, just specify
a defined electron and positron species. (see <a class="reference internal" href="multiphoton_Breit_Wheeler.html"><span class="doc">Multiphoton Breit-Wheeler pair creation</span></a>)</p>
<p><span class="red">This parameter is an attribute of photon species only (mass=0).</span></p>
</dd></dl>

<dl class="data">
<dt id="multiphoton_Breit_Wheeler_sampling">
<code class="descname">multiphoton_Breit_Wheeler_sampling</code><a class="headerlink" href="#multiphoton_Breit_Wheeler_sampling" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[1,1]</span></code></td>
</tr>
</tbody>
</table>
<p>This entry is an array of two integers respectively corresponding to the
number of electrons and positrons generated per photon decay. By default,
a single electron and positron are created. This number can be increased
to improve the particle statistics. The weight of each particle is therefore
the photon one divided by the corresponding number. Obviously, this parameter can not be
below 1. Note that large numbers will rapidly slow down the application
performance and can lead to memory saturation. (see <a class="reference internal" href="multiphoton_Breit_Wheeler.html"><span class="doc">Multiphoton Breit-Wheeler pair creation</span></a>)</p>
<p><span class="red">This parameter is an attribute of photon species only (mass=0).</span></p>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="lasers">
<h2>Lasers<a class="headerlink" href="#lasers" title="Permalink to this headline">¶</a></h2>
<p>A laser consists in applying oscillating boundary conditions for the magnetic
field on one of the box sides. The only boundary conditions that support lasers
are <code class="docutils literal notranslate"><span class="pre">&quot;silver-muller&quot;</span></code> (see <a class="reference internal" href="#EM_boundary_conditions" title="EM_boundary_conditions"><code class="xref py py-data docutils literal notranslate"><span class="pre">EM_boundary_conditions</span></code></a>).
There are several syntaxes to introduce a laser in <strong class="program">Smilei</strong>:</p>
<p class="rubric">1. Defining a generic wave</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Laser</span><span class="p">(</span>
    <span class="n">box_side</span> <span class="o">=</span> <span class="s2">&quot;xmin&quot;</span><span class="p">,</span>
    <span class="n">space_time_profile</span> <span class="o">=</span> <span class="p">[</span> <span class="n">By_profile</span><span class="p">,</span> <span class="n">Bz_profile</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="box_side">
<code class="descname">box_side</code><a class="headerlink" href="#box_side" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;xmin&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Side of the box from which the laser originates: at the moment, only <code class="docutils literal notranslate"><span class="pre">&quot;xmin&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;xmax&quot;</span></code> are supported.</p>
</dd></dl>

<dl class="data">
<dt id="space_time_profile">
<code class="descname">space_time_profile</code><a class="headerlink" href="#space_time_profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of two <em>python</em> functions</td>
</tr>
</tbody>
</table>
<p>The full wave expression at the chosen box side. It is a list of <strong>two</strong> <em>python</em>
functions taking several arguments depending on the simulation dimension:
<span class="math notranslate">\((t)\)</span> for a 1-D simulation, <span class="math notranslate">\((y,t)\)</span> for a 2-D simulation (etc.)
The two functions represent <span class="math notranslate">\(B_y\)</span> and <span class="math notranslate">\(B_z\)</span>, respectively.</p>
</dd></dl>

</div></blockquote>
<p class="rubric">2. Defining the wave envelopes</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Laser</span><span class="p">(</span>
    <span class="n">box_side</span>        <span class="o">=</span> <span class="s2">&quot;xmin&quot;</span><span class="p">,</span>
    <span class="n">omega</span>          <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">chirp_profile</span>  <span class="o">=</span> <span class="n">tconstant</span><span class="p">(),</span>
    <span class="n">time_envelope</span>  <span class="o">=</span> <span class="n">tgaussian</span><span class="p">(),</span>
    <span class="n">space_envelope</span> <span class="o">=</span> <span class="p">[</span> <span class="n">By_profile</span>  <span class="p">,</span> <span class="n">Bz_profile</span>   <span class="p">],</span>
    <span class="n">phase</span>          <span class="o">=</span> <span class="p">[</span> <span class="n">PhiY_profile</span><span class="p">,</span> <span class="n">PhiZ_profile</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This implements a wave of the form:</p>
<div class="math notranslate">
\[ \begin{align}\begin{aligned}B_y(\mathbf{x}, t) = S_y(\mathbf{x})\; T\left[t-\phi_y(\mathbf{x})/\omega(t)\right]
\;\sin\left( \omega(t) t - \phi_y(\mathbf{x}) \right)\\B_z(\mathbf{x}, t) = S_z(\mathbf{x})\; T\left[t-\phi_z(\mathbf{x})/\omega(t)\right]
\;\sin\left( \omega(t) t - \phi_z(\mathbf{x}) \right)\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate">\(T\)</span> is the temporal envelope, <span class="math notranslate">\(S_y\)</span> and <span class="math notranslate">\(S_y\)</span> are the
spatial envelopes, <span class="math notranslate">\(\omega\)</span> is the time-varying frequency, and
<span class="math notranslate">\(\phi_y\)</span> and <span class="math notranslate">\(\phi_z\)</span> are the phases.</p>
<dl class="data">
<dt id="omega">
<code class="descname">omega</code><a class="headerlink" href="#omega" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The laser angular frequency.</p>
</dd></dl>

<dl class="data">
<dt id="chirp_profile">
<code class="descname">chirp_profile</code><a class="headerlink" href="#chirp_profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a <em>python</em> function or a <a class="reference internal" href="#profiles"><span class="std std-ref">time profile</span></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">tconstant()</span></code></td>
</tr>
</tbody>
</table>
<p>The variation of the laser frequency over time, such that
<span class="math notranslate">\(\omega(t)=\mathtt{omega}\times\mathtt{chirp\_profile}(t)\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="time_envelope">
<code class="descname">time_envelope</code><a class="headerlink" href="#time_envelope" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a <em>python</em> function or a <a class="reference internal" href="#profiles"><span class="std std-ref">time profile</span></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">tconstant()</span></code></td>
</tr>
</tbody>
</table>
<p>The temporal envelope of the laser.</p>
</dd></dl>

<dl class="data">
<dt id="space_envelope">
<code class="descname">space_envelope</code><a class="headerlink" href="#space_envelope" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a list of two <em>python</em> functions or two <a class="reference internal" href="#profiles"><span class="std std-ref">spatial profiles</span></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">1.,</span> <span class="pre">0.</span> <span class="pre">]</span></code></td>
</tr>
</tbody>
</table>
<p>The two spatial envelopes <span class="math notranslate">\(S_y\)</span> and <span class="math notranslate">\(S_z\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="phase">
<code class="descname">phase</code><a class="headerlink" href="#phase" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">a list of two <em>python</em> functions or two <a class="reference internal" href="#profiles"><span class="std std-ref">spatial profiles</span></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">0.,</span> <span class="pre">0.</span> <span class="pre">]</span></code></td>
</tr>
</tbody>
</table>
<p>The two spatially-varying phases <span class="math notranslate">\(\phi_y\)</span> and <span class="math notranslate">\(\phi_z\)</span>.</p>
</dd></dl>

</div></blockquote>
<p class="rubric">3. Defining a 1D planar wave</p>
<blockquote>
<div><p>For one-dimensional simulations, you may use the simplified laser creator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LaserPlanar1D</span><span class="p">(</span>
    <span class="n">box_side</span>         <span class="o">=</span> <span class="s2">&quot;xmin&quot;</span><span class="p">,</span>
    <span class="n">a0</span>              <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">omega</span>           <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">polarization_phi</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">ellipticity</span>     <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">time_envelope</span>   <span class="o">=</span> <span class="n">tconstant</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="a0">
<code class="descname">a0</code><a class="headerlink" href="#a0" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The normalized vector potential</p>
</dd></dl>

<dl class="data">
<dt id="polarization_phi">
<code class="descname">polarization_phi</code><a class="headerlink" href="#polarization_phi" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The angle of the polarization ellipse major axis relative to the X-Y plane, in radians.</p>
</dd></dl>

<dl class="data">
<dt id="ellipticity">
<code class="descname">ellipticity</code><a class="headerlink" href="#ellipticity" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The polarization ellipticity: 0 for linear and <span class="math notranslate">\(\pm 1\)</span> for circular.</p>
</dd></dl>

</div></blockquote>
<p class="rubric">4. Defining a 2D gaussian wave</p>
<blockquote>
<div><p>For two-dimensional simulations, you may use the simplified laser creator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LaserGaussian2D</span><span class="p">(</span>
    <span class="n">box_side</span>         <span class="o">=</span> <span class="s2">&quot;xmin&quot;</span><span class="p">,</span>
    <span class="n">a0</span>              <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">omega</span>           <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">focus</span>           <span class="o">=</span> <span class="p">[</span><span class="mf">50.</span><span class="p">,</span> <span class="mf">40.</span><span class="p">],</span>
    <span class="n">waist</span>           <span class="o">=</span> <span class="mf">3.</span><span class="p">,</span>
    <span class="n">incidence_angle</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">polarization_phi</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">ellipticity</span>     <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">time_envelope</span>   <span class="o">=</span> <span class="n">tconstant</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="focus">
<code class="descname">focus</code><a class="headerlink" href="#focus" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of two floats <code class="docutils literal notranslate"><span class="pre">[X,</span> <span class="pre">Y]</span></code></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> positions of the laser focus.</p>
</dd></dl>

<dl class="data">
<dt id="waist">
<code class="descname">waist</code><a class="headerlink" href="#waist" title="Permalink to this definition">¶</a></dt>
<dd><p>The waist value. Transverse coordinate at which the field is at 1/e of its maximum value.</p>
</dd></dl>

<dl class="data">
<dt id="incidence_angle">
<code class="descname">incidence_angle</code><a class="headerlink" href="#incidence_angle" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The angle of the laser beam relative to the X axis, in radians.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">time_envelope</code></dt>
<dd><p>Time envelope of the field (not intensity).</p>
</dd></dl>

</div></blockquote>
<p class="rubric">5. Defining a 3D gaussian wave</p>
<blockquote>
<div><p>For three-dimensional simulations, you may use the simplified laser creator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LaserGaussian3D</span><span class="p">(</span>
    <span class="n">box_side</span>         <span class="o">=</span> <span class="s2">&quot;xmin&quot;</span><span class="p">,</span>
    <span class="n">a0</span>              <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">omega</span>           <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="n">focus</span>           <span class="o">=</span> <span class="p">[</span><span class="mf">50.</span><span class="p">,</span> <span class="mf">40.</span><span class="p">,</span> <span class="mf">40.</span><span class="p">],</span>
    <span class="n">waist</span>           <span class="o">=</span> <span class="mf">3.</span><span class="p">,</span>
    <span class="n">incidence_angle</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
    <span class="n">polarization_phi</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">ellipticity</span>     <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span>
    <span class="n">time_envelope</span>   <span class="o">=</span> <span class="n">tconstant</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is almost the same as <code class="docutils literal notranslate"><span class="pre">LaserGaussian2D</span></code>, with the <code class="docutils literal notranslate"><span class="pre">focus</span></code> parameter having
now 3 elements (focus position in 3D), and the <code class="docutils literal notranslate"><span class="pre">incidence_angle</span></code> being a list of
two angles, corresponding to rotations around <cite>y</cite> and <cite>z</cite>, respectively.</p>
</div></blockquote>
<hr class="docutils" />
</div>
<div class="section" id="external-fields">
<span id="externalfield"></span><h2>External fields<a class="headerlink" href="#external-fields" title="Permalink to this headline">¶</a></h2>
<p>An external field can be applied using an <code class="docutils literal notranslate"><span class="pre">ExternalField</span></code> block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ExternalField</span><span class="p">(</span>
    <span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;Ex&quot;</span><span class="p">,</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">xvacuum</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="field">
<code class="descname">field</code><a class="headerlink" href="#field" title="Permalink to this definition">¶</a></dt>
<dd><p>Field name: <code class="docutils literal notranslate"><span class="pre">&quot;Ex&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ey&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ez&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Bx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;By&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;Bz&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="profile">
<code class="descname">profile</code><a class="headerlink" href="#profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The initial spatial profile of the applied field.
Refer to <a class="reference internal" href="units.html"><span class="doc">Units</span></a> to understand the units of this field.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="antennas">
<span id="id2"></span><h2>Antennas<a class="headerlink" href="#antennas" title="Permalink to this headline">¶</a></h2>
<p>An antenna is an extra current applied during the whole simulation.
It is applied using an <code class="docutils literal notranslate"><span class="pre">Antenna</span></code> block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Antenna</span><span class="p">(</span>
    <span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;Jz&quot;</span><span class="p">,</span>
    <span class="n">space_profile</span> <span class="o">=</span> <span class="n">gaussian</span><span class="p">(</span><span class="mf">0.01</span><span class="p">),</span>
    <span class="n">time_profile</span> <span class="o">=</span> <span class="n">tcosine</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">field</code></dt>
<dd><p>The name of the current: <code class="docutils literal notranslate"><span class="pre">&quot;Jx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Jy&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;Jz&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="space_profile">
<code class="descname">space_profile</code><a class="headerlink" href="#space_profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The initial spatial profile of the applied antenna.
Refer to <a class="reference internal" href="units.html"><span class="doc">Units</span></a> to understand the units of this current.</p>
</dd></dl>

<dl class="data">
<dt id="time_profile">
<code class="descname">time_profile</code><a class="headerlink" href="#time_profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float or <em>python</em> function (see section <a class="reference internal" href="#profiles"><span class="std std-ref">Profiles</span></a>)</td>
</tr>
</tbody>
</table>
<p>The temporal profile of the applied antenna. It multiplies <code class="docutils literal notranslate"><span class="pre">space_profile</span></code>.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="profiles">
<span id="id3"></span><h2>Profiles<a class="headerlink" href="#profiles" title="Permalink to this headline">¶</a></h2>
<p>Several quantities require the input of a profile: particle charge, particle density,
external fields, etc. Depending on the case, they can be <em>spatial</em> or <em>temporal</em>
profiles.</p>
<p class="rubric">1. Constant profiles</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Species(</span> <span class="pre">...</span> <span class="pre">,</span> <span class="pre">charge</span> <span class="pre">=</span> <span class="pre">-3.,</span> <span class="pre">...</span> <span class="pre">)</span></code> defines a species with charge <span class="math notranslate">\(Z^\star=3\)</span>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Species(</span> <span class="pre">...</span> <span class="pre">,</span> <span class="pre">number_density</span> <span class="pre">=</span> <span class="pre">10.,</span> <span class="pre">...</span> <span class="pre">)</span></code> defines a species with density <span class="math notranslate">\(10\,N_r\)</span>.
You can choose <code class="docutils literal notranslate"><span class="pre">number_density</span></code> or <code class="docutils literal notranslate"><span class="pre">charge_density</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Species(</span> <span class="pre">...</span> <span class="pre">,</span> <span class="pre">mean_velocity</span> <span class="pre">=</span> <span class="pre">[0.05,</span> <span class="pre">0.,</span> <span class="pre">0.],</span> <span class="pre">...</span> <span class="pre">)</span></code> defines a species
with drift velocity <span class="math notranslate">\(v_x = 0.05\,c\)</span> over the whole box.</li>
<li><code class="docutils literal notranslate"><span class="pre">Species(...,</span> <span class="pre">momentum_initialization=&quot;maxwell-juettner&quot;,</span> <span class="pre">temperature=[1e-5],</span> <span class="pre">...)</span></code> defines
a species with a Maxwell-Jüttner distribution of temperature <span class="math notranslate">\(T = 10^{-5}\,m_ec^2\)</span> over the whole box.
Note that the temperature may be anisotropic: <code class="docutils literal notranslate"><span class="pre">temperature=[1e-5,</span> <span class="pre">2e-5,</span> <span class="pre">2e-5]</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Species(</span> <span class="pre">...</span> <span class="pre">,</span> <span class="pre">particles_per_cell</span> <span class="pre">=</span> <span class="pre">10.,</span> <span class="pre">...</span> <span class="pre">)</span></code> defines a species with 10 particles per cell.</li>
<li><code class="docutils literal notranslate"><span class="pre">ExternalField(</span> <span class="pre">field=&quot;Bx&quot;,</span> <span class="pre">profile=0.1</span> <span class="pre">)</span></code> defines a constant external field <span class="math notranslate">\(B_x = 0.1 B_r\)</span>.</li>
</ul>
<p class="rubric">2. <em>Python</em> profiles</p>
<blockquote>
<div><p>Any <em>python</em> function can be a profile. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">&lt;</span><span class="mf">1.</span><span class="p">:</span> <span class="k">return</span> <span class="mf">0.</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mf">1.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>    <span class="c1"># two variables for 2D simulation</span>
    <span class="n">twoPI</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span>  <span class="n">twoPI</span> <span class="o">*</span> <span class="n">x</span><span class="o">/</span><span class="mf">3.2</span> <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>Once the function is created, you have to include it in the block you want,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Species</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">f</span><span class="p">,</span> <span class="o">...</span> <span class="p">)</span>

<span class="n">Species</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">mean_velocity</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="o">...</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is possible, for higher performances, to create functions with
arguments <em>(x, y, etc.)</em> that are actually <em>numpy</em> arrays. If the function returns
a <em>numpy</em> array of the same size, it will automatically be considered as a profile
acting on arrays instead of single floats. Currently, this feature is only available
on Species’ profiles.</p>
</div>
<p class="rubric">3. Pre-defined <em>spatial</em> profiles</p>
<blockquote>
<div><dl class="function">
<dt id="constant">
<code class="descname">constant</code><span class="sig-paren">(</span><em>value</em>, <em>xvacuum=0.</em>, <em>yvacuum=0.</em><span class="sig-paren">)</span><a class="headerlink" href="#constant" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> – the magnitude</li>
<li><strong>xvacuum</strong> – vacuum region before the start of the profile.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trapezoidal">
<code class="descname">trapezoidal</code><span class="sig-paren">(</span><em>max</em>, <em>xvacuum=0.</em>, <em>xplateau=None</em>, <em>xslope1=0.</em>, <em>xslope2=0.</em>, <em>yvacuum=0.</em>, <em>yplateau=None</em>, <em>yslope1=0.</em>, <em>yslope2=0.</em><span class="sig-paren">)</span><a class="headerlink" href="#trapezoidal" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>max</strong> – maximum value</li>
<li><strong>xvacuum</strong> – empty length before the ramp up</li>
<li><strong>xplateau</strong> – length of the plateau (default is <a class="reference internal" href="#grid_length" title="grid_length"><code class="xref py py-data docutils literal notranslate"><span class="pre">grid_length</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">xvacuum</span></code>)</li>
<li><strong>xslope1</strong> – length of the ramp up</li>
<li><strong>xslope2</strong> – length of the ramp down</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gaussian">
<code class="descname">gaussian</code><span class="sig-paren">(</span><em>max</em>, <em>xvacuum=0.</em>, <em>xlength=None</em>, <em>xfwhm=None</em>, <em>xcenter=None</em>, <em>xorder=2</em>, <em>yvacuum=0.</em>, <em>ylength=None</em>, <em>yfwhm=None</em>, <em>ycenter=None</em>, <em>yorder=2</em><span class="sig-paren">)</span><a class="headerlink" href="#gaussian" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>max</strong> – maximum value</li>
<li><strong>xvacuum</strong> – empty length before starting the profile</li>
<li><strong>xlength</strong> – length of the profile (default is <a class="reference internal" href="#grid_length" title="grid_length"><code class="xref py py-data docutils literal notranslate"><span class="pre">grid_length</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">xvacuum</span></code>)</li>
<li><strong>xfwhm</strong> – gaussian FWHM (default is <code class="docutils literal notranslate"><span class="pre">xlength/3.</span></code>)</li>
<li><strong>xcenter</strong> – gaussian center position (default is in the middle of <code class="docutils literal notranslate"><span class="pre">xlength</span></code>)</li>
<li><strong>xorder</strong> – order of the gaussian.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Note:</th><td class="field-body"><p class="first last">If <code class="docutils literal notranslate"><span class="pre">yorder</span></code> equals 0, then the profile is constant over <span class="math notranslate">\(y\)</span>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="polygonal">
<code class="descname">polygonal</code><span class="sig-paren">(</span><em>xpoints=[]</em>, <em>xvalues=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#polygonal" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xpoints</strong> – list of the positions of the points</li>
<li><strong>xvalues</strong> – list of the values of the profile at each point</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosine">
<code class="descname">cosine</code><span class="sig-paren">(</span><em>base</em>, <em>amplitude=1.</em>, <em>xvacuum=0.</em>, <em>xlength=None</em>, <em>xphi=0.</em>, <em>xnumber=1</em><span class="sig-paren">)</span><a class="headerlink" href="#cosine" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>base</strong> – offset of the profile value</li>
<li><strong>amplitude</strong> – amplitude of the cosine</li>
<li><strong>xvacuum</strong> – empty length before starting the profile</li>
<li><strong>xlength</strong> – length of the profile (default is <a class="reference internal" href="#grid_length" title="grid_length"><code class="xref py py-data docutils literal notranslate"><span class="pre">grid_length</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">xvacuum</span></code>)</li>
<li><strong>xphi</strong> – phase offset</li>
<li><strong>xnumber</strong> – number of periods within <code class="docutils literal notranslate"><span class="pre">xlength</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="polynomial">
<code class="descname">polynomial</code><span class="sig-paren">(</span><em>x0=0.</em>, <em>y0=0.</em>, <em>z0=0.</em>, <em>order0=[]</em>, <em>order1=[]</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#polynomial" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x0</strong><strong>,</strong><strong>y0</strong> – The reference position(s)</li>
<li><strong>order0</strong> – Coefficient for the 0th order</li>
<li><strong>order1</strong> – Coefficient for the 1st order (2 coefficients in 2D)</li>
<li><strong>order2</strong> – Coefficient for the 2nd order (3 coefficients in 2D)</li>
<li><strong>etc</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Creates a polynomial of the form</p>
<div class="math notranslate">
\[\begin{split}\begin{eqnarray}
&amp;\sum_i a_i(x-x_0)^i &amp; \quad\mathrm{in\, 1D}\\
&amp;\sum_i \sum_j a_{ij}(x-x0)^{i-j}(y-y0)^j &amp; \quad\mathrm{in\, 2D}\\
&amp;\sum_i \sum_j \sum_k a_{ijk}(x-x0)^{i-j-k}(y-y0)^j(z-z0)^k &amp; \quad\mathrm{in\, 3D}
\end{eqnarray}\end{split}\]</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">orderi</span></code> is a coefficient (or list of coefficents) associated to the order <code class="docutils literal notranslate"><span class="pre">i</span></code>.
In 1D, there is only one coefficient per order. In 2D, each <code class="docutils literal notranslate"><span class="pre">orderi</span></code> is a list
of <code class="docutils literal notranslate"><span class="pre">i+1</span></code> coefficients. For instance, the second order has three coefficients
associated to <span class="math notranslate">\(x^2\)</span>, <span class="math notranslate">\(xy\)</span> and <span class="math notranslate">\(y^2\)</span>, respectively.
In 3D, each <code class="docutils literal notranslate"><span class="pre">orderi</span></code> is a list of <code class="docutils literal notranslate"><span class="pre">(i+1)*(i+2)/2</span></code> coefficients. For instance,
the second order has 6 coefficients associated to <span class="math notranslate">\(x^2\)</span>, <span class="math notranslate">\(xy\)</span>, <span class="math notranslate">\(xz\)</span>,
<span class="math notranslate">\(y^2\)</span>, <span class="math notranslate">\(yz\)</span> and <span class="math notranslate">\(z^2\)</span>, respectively.</p>
</dd></dl>

<p><strong>Examples</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Species</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">density</span> <span class="o">=</span> <span class="n">gaussian</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span> <span class="n">xfwhm</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">xcenter</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span> <span class="o">...</span> <span class="p">)</span>

<span class="n">ExternalField</span><span class="p">(</span> <span class="o">...</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="mf">2.2</span><span class="p">),</span> <span class="o">...</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">4. Pre-defined <em>temporal</em> profiles</p>
<blockquote>
<div><dl class="function">
<dt id="tconstant">
<code class="descname">tconstant</code><span class="sig-paren">(</span><em>start=0.</em><span class="sig-paren">)</span><a class="headerlink" href="#tconstant" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>start</strong> – starting time</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ttrapezoidal">
<code class="descname">ttrapezoidal</code><span class="sig-paren">(</span><em>start=0.</em>, <em>plateau=None</em>, <em>slope1=0.</em>, <em>slope2=0.</em><span class="sig-paren">)</span><a class="headerlink" href="#ttrapezoidal" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – starting time</li>
<li><strong>plateau</strong> – duration of the plateau (default is <a class="reference internal" href="#simulation_time" title="simulation_time"><code class="xref py py-data docutils literal notranslate"><span class="pre">simulation_time</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">start</span></code>)</li>
<li><strong>slope1</strong> – duration of the ramp up</li>
<li><strong>slope2</strong> – duration of the ramp down</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tgaussian">
<code class="descname">tgaussian</code><span class="sig-paren">(</span><em>start=0.</em>, <em>duration=None</em>, <em>fwhm=None</em>, <em>center=None</em>, <em>order=2</em><span class="sig-paren">)</span><a class="headerlink" href="#tgaussian" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – starting time</li>
<li><strong>duration</strong> – duration of the profile (default is <a class="reference internal" href="#simulation_time" title="simulation_time"><code class="xref py py-data docutils literal notranslate"><span class="pre">simulation_time</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">start</span></code>)</li>
<li><strong>fwhm</strong> – gaussian FWHM (default is <code class="docutils literal notranslate"><span class="pre">duration/3.</span></code>)</li>
<li><strong>center</strong> – gaussian center time (default is in the middle of <code class="docutils literal notranslate"><span class="pre">duration</span></code>)</li>
<li><strong>order</strong> – order of the gaussian</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tpolygonal">
<code class="descname">tpolygonal</code><span class="sig-paren">(</span><em>points=[]</em>, <em>values=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#tpolygonal" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>points</strong> – list of times</li>
<li><strong>values</strong> – list of the values at each time</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tcosine">
<code class="descname">tcosine</code><span class="sig-paren">(</span><em>base=0.</em>, <em>amplitude=1.</em>, <em>start=0.</em>, <em>duration=None</em>, <em>phi=0.</em>, <em>freq=1.</em><span class="sig-paren">)</span><a class="headerlink" href="#tcosine" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>base</strong> – offset of the profile value</li>
<li><strong>amplitude</strong> – amplitude of the cosine</li>
<li><strong>start</strong> – starting time</li>
<li><strong>duration</strong> – duration of the profile (default is <a class="reference internal" href="#simulation_time" title="simulation_time"><code class="xref py py-data docutils literal notranslate"><span class="pre">simulation_time</span></code></a> <span class="math notranslate">\(-\)</span> <code class="docutils literal notranslate"><span class="pre">start</span></code>)</li>
<li><strong>phi</strong> – phase offset</li>
<li><strong>freq</strong> – frequency</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tpolynomial">
<code class="descname">tpolynomial</code><span class="sig-paren">(</span><em>t0=0.</em>, <em>order0=[]</em>, <em>order1=[]</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#tpolynomial" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>t0</strong> – The reference position</li>
<li><strong>order0</strong> – Coefficient for the 0th order</li>
<li><strong>order1</strong> – Coefficient for the 1st order</li>
<li><strong>order2</strong> – Coefficient for the 2nd order</li>
<li><strong>etc</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Creates a polynomial of the form <span class="math notranslate">\(\sum_i a_i(t-t_0)^i\)</span>.</p>
</dd></dl>

<dl class="function">
<dt id="tsin2plateau">
<code class="descname">tsin2plateau</code><span class="sig-paren">(</span><em>start=0.</em>, <em>fwhm=0.</em>, <em>plateau=None</em>, <em>slope1=fwhm</em>, <em>slope2=slope1</em><span class="sig-paren">)</span><a class="headerlink" href="#tsin2plateau" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – Profile is 0 before start</li>
<li><strong>fwhm</strong> – Full width half maximum of the profile</li>
<li><strong>plateau</strong> – Length of the plateau</li>
<li><strong>slope1</strong> – Duration of the ramp up of the profil</li>
<li><strong>slope2</strong> – Duration of the ramp down of the profil</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Creates a sin squared profil with a plateau in the middle if needed. If slope1 and 2 are used, fwhm is overwritten.</p>
</dd></dl>

<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Antenna</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">time_profile</span> <span class="o">=</span> <span class="n">tcosine</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span> <span class="o">...</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">Illustrations of the pre-defined spatial and temporal profiles</p>
<img alt="_images/pythonprofiles.png" src="_images/pythonprofiles.png" />
<img alt="_images/pythonprofiles_t.png" src="_images/pythonprofiles_t.png" />
</div>
<hr class="docutils" />
<div class="section" id="walls">
<h2>Walls<a class="headerlink" href="#walls" title="Permalink to this headline">¶</a></h2>
<p>A wall can be introduced using a <code class="docutils literal notranslate"><span class="pre">PartWall</span></code> block in order to
reflect, stop, thermalize or kill particles which reach it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PartWall</span><span class="p">(</span>
    <span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;reflective&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mf">20.</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="kind">
<code class="descname">kind</code><a class="headerlink" href="#kind" title="Permalink to this definition">¶</a></dt>
<dd><p>The kind of wall: <code class="docutils literal notranslate"><span class="pre">&quot;reflective&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;stop&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;thermalize&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;remove&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="x">
<code class="descname">x</code><a class="headerlink" href="#x" title="Permalink to this definition">¶</a></dt>
<dt id="y">
<code class="descname">y</code><a class="headerlink" href="#y" title="Permalink to this definition">¶</a></dt>
<dt id="z">
<code class="descname">z</code><a class="headerlink" href="#z" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the wall in the desired direction. Use only one of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">z</span></code>.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="collisions">
<span id="id4"></span><h2>Collisions<a class="headerlink" href="#collisions" title="Permalink to this headline">¶</a></h2>
<p>To have binary collisions in <strong class="program">Smilei</strong>, add one or several <code class="docutils literal notranslate"><span class="pre">Collisions</span></code> blocks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Collisions</span><span class="p">(</span>
    <span class="n">species1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electrons1&quot;</span><span class="p">,</span>  <span class="s2">&quot;electrons2&quot;</span><span class="p">],</span>
    <span class="n">species2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ions1&quot;</span><span class="p">],</span>
    <span class="n">coulomb_log</span> <span class="o">=</span> <span class="mf">5.</span><span class="p">,</span>
    <span class="n">debug_every</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">ionizing</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="species1">
<code class="descname">species1</code><a class="headerlink" href="#species1" title="Permalink to this definition">¶</a></dt>
<dt id="species2">
<code class="descname">species2</code><a class="headerlink" href="#species2" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists of species’ <a class="reference internal" href="#name" title="name"><code class="xref py py-data docutils literal notranslate"><span class="pre">name</span></code></a>.</p>
<p>The collisions will occur between all species under the group <code class="docutils literal notranslate"><span class="pre">species1</span></code>
and all species under the group <code class="docutils literal notranslate"><span class="pre">species2</span></code>. For example, to collide all
electrons with ions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">species1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electrons1&quot;</span><span class="p">,</span> <span class="s2">&quot;electrons2&quot;</span><span class="p">],</span> <span class="n">species2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ions&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This does not make <code class="docutils literal notranslate"><span class="pre">electrons1</span></code> collide with <code class="docutils literal notranslate"><span class="pre">electrons2</span></code>.</p>
</div>
<p>The two groups of species have to be <em>completely different</em> OR <em>exactly equal</em>.
In other words, if <code class="docutils literal notranslate"><span class="pre">species1</span></code> is not equal to <code class="docutils literal notranslate"><span class="pre">species2</span></code>,
then they cannot have any common species.
If the two groups are exactly equal, we call this situation <strong>intra-collisions</strong>.</p>
</dd></dl>

<dl class="data">
<dt id="coulomb_log">
<code class="descname">coulomb_log</code><a class="headerlink" href="#coulomb_log" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The Coulomb logarithm.</p>
<ul class="simple">
<li>If <span class="math notranslate">\(= 0\)</span>, the Coulomb logarithm is automatically computed for each collision.</li>
<li>If <span class="math notranslate">\(&gt; 0\)</span>, the Coulomb logarithm is equal to this value.</li>
</ul>
</dd></dl>

<dl class="data">
<dt id="debug_every">
<code class="descname">debug_every</code><a class="headerlink" href="#debug_every" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">Number of timesteps between each output of information about collisions.</div>
<div class="line">If 0, there will be no outputs.</div>
</div>
</dd></dl>

<span class="target" id="collisionalionization"></span><dl class="data">
<dt id="ionizing">
<code class="descname">ionizing</code><a class="headerlink" href="#ionizing" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">False</td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, <a class="reference internal" href="collisions.html#collionization"><span class="std std-ref">collisional ionization</span></a> will occur. One of the
species groups must be all electrons (<a class="reference internal" href="#mass" title="mass"><code class="xref py py-data docutils literal notranslate"><span class="pre">mass</span></code></a> = 1), and the other one all ions of the
same <a class="reference internal" href="#atomic_number" title="atomic_number"><code class="xref py py-data docutils literal notranslate"><span class="pre">atomic_number</span></code></a>.</p>
</dd></dl>

<p>For more details about the collision scheme in <strong class="program">Smilei</strong>, see <a class="reference internal" href="collisions.html"><span class="doc">Binary collisions</span></a></p>
<hr class="docutils" />
</div>
<div class="section" id="radiations-reaction">
<span id="radiationreaction"></span><h2>Radiations reaction<a class="headerlink" href="#radiations-reaction" title="Permalink to this headline">¶</a></h2>
<p>The block <code class="docutils literal notranslate"><span class="pre">RadiationReaction()</span></code> enables to tune the radiation loss properties
(see <a class="reference internal" href="radiation_loss.html"><span class="doc">Synchrotron-like radiation reaction</span></a>).
Many parameters are used for the generation of the cross-section tables
for the Monte-Carlo emission process.
If the tables already exist in the simulation directory, then they will be read
and no new table will be generated by <strong class="program">Smilei</strong>.
Else, <strong class="program">Smilei</strong> has all the components to compute and output these
tables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RadiationReaction</span><span class="p">(</span>

   <span class="c1"># Parameters to generate the table h used by Niel et al.</span>
   <span class="n">h_chipa_min</span> <span class="o">=</span> <span class="mf">1E-3</span><span class="p">,</span>
   <span class="n">h_chipa_max</span> <span class="o">=</span> <span class="mf">1E1</span><span class="p">,</span>
   <span class="n">h_dim</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
   <span class="n">h_computation_method</span> <span class="o">=</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span>

   <span class="c1"># Parameter to generate the table integfochi used by the Monte-Carlo model</span>
   <span class="n">integfochi_chipa_min</span> <span class="o">=</span> <span class="mf">1e-4</span><span class="p">,</span>
   <span class="n">integfochi_chipa_max</span> <span class="o">=</span> <span class="mf">1e1</span><span class="p">,</span>
   <span class="n">integfochi_dim</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>

   <span class="c1"># Parameter to generate the table xip used by the Monte-Carlo model</span>
   <span class="n">xip_chipa_min</span> <span class="o">=</span> <span class="mf">1e-4</span><span class="p">,</span>
   <span class="n">xip_chipa_max</span> <span class="o">=</span> <span class="mf">1e1</span><span class="p">,</span>
   <span class="n">xip_power</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
   <span class="n">xip_threshold</span> <span class="o">=</span> <span class="mf">1e-3</span><span class="p">,</span>
   <span class="n">chipa_xip_dim</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
   <span class="n">chiph_xip_dim</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>

   <span class="c1"># Radiation parameters</span>
   <span class="n">chipa_radiation_threshold</span> <span class="o">=</span> <span class="mf">1e-3</span><span class="p">,</span>
   <span class="n">chipa_disc_min_threshold</span> <span class="o">=</span> <span class="mf">1e-2</span><span class="p">,</span>
   <span class="n">table_path</span> <span class="o">=</span> <span class="s2">&quot;../databases/&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="h_chipa_min">
<code class="descname">h_chipa_min</code><a class="headerlink" href="#h_chipa_min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Minimum value of the quantum parameter <span class="math notranslate">\(\chi\)</span> for the table <em>h</em> of Niel <cite>et al</cite>.</p>
</dd></dl>

<dl class="data">
<dt id="h_chipa_max">
<code class="descname">h_chipa_max</code><a class="headerlink" href="#h_chipa_max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e1</td>
</tr>
</tbody>
</table>
<p>Maximum value of the quantum parameter <span class="math notranslate">\(\chi\)</span> for the table <em>h</em> of Niel <cite>et al</cite>.</p>
</dd></dl>

<dl class="data">
<dt id="h_dim">
<code class="descname">h_dim</code><a class="headerlink" href="#h_dim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Dimension of the table <em>h</em> of Niel <cite>et al</cite>.</p>
</dd></dl>

<dl class="data">
<dt id="h_computation_method">
<code class="descname">h_computation_method</code><a class="headerlink" href="#h_computation_method" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">“table”</td>
</tr>
</tbody>
</table>
<p>Method to compute the value of the table <em>h</em> of Niel <cite>et al</cite> during the emission process.
The possible values are:</p>
<ul class="simple">
<li>“table”: the <em>h</em> function is tabulated. The table is computed at initialization or read from an external file.</li>
<li>“fit5”: A polynomial fit of order 5 is used. No table is required.
The maximal relative error to the reference data is of maximum of 0.02.
The fit is valid for quantum parameters <span class="math notranslate">\(\chi\)</span> between 1e-3 and 10.</li>
<li>“fit10”:  A polynomial fit of order 10 is used. No table is required.
The precision if better than the fit of order 5 with a maximal relative error of 0.0002.
The fit is valid for quantum parameters <span class="math notranslate">\(\chi\)</span> between 1e-3 and 10.</li>
<li>“ridgers”: The fit of Ridgers given in Ridgers et al., ArXiv 1708.04511 (2017)</li>
</ul>
<p>The use of tabulated values is best for accuracy but not for performance.
Table access prevent total vectorization.
Fits are vectorizable.</p>
</dd></dl>

<dl class="data">
<dt id="integfochi_chipa_min">
<code class="descname">integfochi_chipa_min</code><a class="headerlink" href="#integfochi_chipa_min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Minimum value of the quantum parameter c for the table containing
the integration of <span class="math notranslate">\(F/\chi\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="integfochi_chipa_max">
<code class="descname">integfochi_chipa_max</code><a class="headerlink" href="#integfochi_chipa_max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e1</td>
</tr>
</tbody>
</table>
<p>Maximum value of the quantum parameter <span class="math notranslate">\(\chi\)</span> for the table containing
the integration of <span class="math notranslate">\(F/\chi\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="integfochi_dim">
<code class="descname">integfochi_dim</code><a class="headerlink" href="#integfochi_dim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Discretization of the table containing
the integration of <span class="math notranslate">\(F/\chi\)</span>.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chipa_min">
<code class="descname">xip_chipa_min</code><a class="headerlink" href="#xip_chipa_min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Minimum particle quantum parameter for the computation of the <em>chimin</em>
and <em>xip</em> tables.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chipa_max">
<code class="descname">xip_chipa_max</code><a class="headerlink" href="#xip_chipa_max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e1</td>
</tr>
</tbody>
</table>
<p>Maximum particle quantum parameter for the computation of the <em>chimin</em>
and <em>xip</em> tables.</p>
</dd></dl>

<dl class="data">
<dt id="xip_power">
<code class="descname">xip_power</code><a class="headerlink" href="#xip_power" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">4</td>
</tr>
</tbody>
</table>
<p>Maximum decrease in order of magnitude for the search for the minimum value
of the photon quantum parameter. It is advised to keep this value by default.</p>
</dd></dl>

<dl class="data">
<dt id="xip_threshold">
<code class="descname">xip_threshold</code><a class="headerlink" href="#xip_threshold" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Minimum value of <em>xip</em> to compute the minimum value of the photon
quantum parameter. It is advised to keep this value by default.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chipa_dim">
<code class="descname">xip_chipa_dim</code><a class="headerlink" href="#xip_chipa_dim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Discretization of the <em>chimin</em> and <em>xip</em> tables in the <em>chipa</em> direction.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chiph_dim">
<code class="descname">xip_chiph_dim</code><a class="headerlink" href="#xip_chiph_dim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Discretization of the <em>xip</em> tables in the <em>chiph</em> direction.</p>
</dd></dl>

<dl class="data">
<dt id="output_format">
<code class="descname">output_format</code><a class="headerlink" href="#output_format" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;hdf5&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Output format of the tables: <code class="docutils literal notranslate"><span class="pre">&quot;hdf5&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;binary&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;ascii&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="chipa_radiation_threshold">
<code class="descname">chipa_radiation_threshold</code><a class="headerlink" href="#chipa_radiation_threshold" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Threshold on the particle quantum parameter <em>chipa</em>. When a particle has a
quantum parameter below this threshold, radiation reaction is not taken
into account.</p>
</dd></dl>

<dl class="data">
<dt id="chipa_disc_min_threshold">
<code class="descname">chipa_disc_min_threshold</code><a class="headerlink" href="#chipa_disc_min_threshold" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-2</td>
</tr>
</tbody>
</table>
<p>Threshold on the particle quantum parameter <em>chipa</em> between the continuous
and the discontinuous radiation model.</p>
</dd></dl>

<dl class="data">
<dt id="table_path">
<code class="descname">table_path</code><a class="headerlink" href="#table_path" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;./&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Path to the external tables for the radiation losses.
Default tables are located in <code class="docutils literal notranslate"><span class="pre">databases</span></code>.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="multiphoton-breit-wheeler">
<span id="multiphotonbreitwheeler"></span><h2>Multiphoton Breit-Wheeler<a class="headerlink" href="#multiphoton-breit-wheeler" title="Permalink to this headline">¶</a></h2>
<p>The block <code class="docutils literal notranslate"><span class="pre">MultiphotonBreitWheeler</span></code> enables to tune parameters of the
multiphoton Breit-Wheeler process and particularly the table generation.</p>
<p>There are two tables used for the multiphoton Breit-Wheeler refers to as the
<em>T</em> table and the <em>xip</em> table.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MultiphotonBreitWheeler</span><span class="p">(</span>

  <span class="c1"># Table output format, can be &quot;ascii&quot;, &quot;binary&quot;, &quot;hdf5&quot;</span>
  <span class="n">output_format</span> <span class="o">=</span> <span class="s2">&quot;hdf5&quot;</span><span class="p">,</span>

  <span class="c1"># Path the tables</span>
  <span class="n">table_path</span> <span class="o">=</span> <span class="s2">&quot;../databases/&quot;</span>

  <span class="c1"># Table T parameters</span>
  <span class="n">T_chiph_min</span> <span class="o">=</span> <span class="mf">1e-2</span>
  <span class="n">T_chiph_max</span> <span class="o">=</span> <span class="mf">1e1</span>
  <span class="n">T_dim</span> <span class="o">=</span> <span class="mi">128</span>

  <span class="c1"># Table xip parameters</span>
  <span class="n">xip_chiph_min</span> <span class="o">=</span> <span class="mf">1e-2</span>
  <span class="n">xip_chiph_max</span> <span class="o">=</span> <span class="mf">1e1</span>
  <span class="n">xip_power</span> <span class="o">=</span> <span class="mi">4</span>
  <span class="n">xip_threshold</span> <span class="o">=</span> <span class="mf">1e-3</span>
  <span class="n">xip_chipa_dim</span> <span class="o">=</span> <span class="mi">128</span>
  <span class="n">xip_chiph_dim</span> <span class="o">=</span> <span class="mi">128</span>

<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">table_path</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;./&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Path to the external tables for the multiphoton Breit-Wheeler.
Default tables are located in <code class="docutils literal notranslate"><span class="pre">databases</span></code>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">output_format</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;hdf5&quot;</span></code></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Output format of the tables:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;hdf5&quot;</span></code>: <code class="docutils literal notranslate"><span class="pre">multiphoton_Breit_Wheeler_tables.h5</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;binary&quot;</span></code>: <code class="docutils literal notranslate"><span class="pre">tab_T.bin</span></code> and <code class="docutils literal notranslate"><span class="pre">tab_mBW_xip.bin</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;ascii&quot;</span></code>: <code class="docutils literal notranslate"><span class="pre">tab_T.dat</span></code> and <code class="docutils literal notranslate"><span class="pre">tab_mBW_xip.dat</span></code></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="T_chiph_min">
<code class="descname">T_chiph_min</code><a class="headerlink" href="#T_chiph_min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-2</td>
</tr>
</tbody>
</table>
<p>Minimum value of the photon quantum parameter <span class="math notranslate">\(\chi_\gamma\)</span> for the table <em>T</em>.</p>
</dd></dl>

<dl class="data">
<dt id="T_chiph_max">
<code class="descname">T_chiph_max</code><a class="headerlink" href="#T_chiph_max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e1</td>
</tr>
</tbody>
</table>
<p>Maximum value of the photon quantum parameter <span class="math notranslate">\(\chi_\gamma\)</span> for the table <em>T</em>.</p>
</dd></dl>

<dl class="data">
<dt id="T_dim">
<code class="descname">T_dim</code><a class="headerlink" href="#T_dim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Dimension of the table <em>T</em>.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chiph_min">
<code class="descname">xip_chiph_min</code><a class="headerlink" href="#xip_chiph_min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-2</td>
</tr>
</tbody>
</table>
<p>Minimum photon quantum parameter for the computation of the <em>chimin</em>
and <em>xip</em> tables.</p>
</dd></dl>

<dl class="data">
<dt id="xip_chiph_max">
<code class="descname">xip_chiph_max</code><a class="headerlink" href="#xip_chiph_max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e1</td>
</tr>
</tbody>
</table>
<p>Maximum photon quantum parameter for the computation of the <em>chimin</em>
and <em>xip</em> tables.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">xip_power</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">4</td>
</tr>
</tbody>
</table>
<p>Maximum decrease in order of magnitude for the search for the minimum value
of the photon quantum parameter. It is advised to keep this value by default.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">xip_threshold</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1e-3</td>
</tr>
</tbody>
</table>
<p>Minimum value of <em>xip</em> to compute the minimum value of the photon
quantum parameter. It is advised to keep this value by default.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">xip_chiph_dim</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Discretization of the <em>chimin</em> and <em>xip</em> tables in the <em>chiph</em> direction.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">xip_chipa_dim</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">128</td>
</tr>
</tbody>
</table>
<p>Discretization of the <em>xip</em> tables in the <em>chipa</em> direction.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="scalar-diagnostics">
<span id="diagscalar"></span><h2><em>Scalar</em> diagnostics<a class="headerlink" href="#scalar-diagnostics" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">Smilei</strong> can collect various scalar data, such as total particle energy, total field energy, etc.
This is done by including the block <code class="docutils literal notranslate"><span class="pre">DiagScalar</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagScalar</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">10</span> <span class="p">,</span>
    <span class="nb">vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Utot&quot;</span><span class="p">,</span> <span class="s2">&quot;Ukin&quot;</span><span class="p">,</span> <span class="s2">&quot;Uelm&quot;</span><span class="p">],</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="mi">10</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><p>Number of timesteps between each output <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt id="vars">
<code class="descname">vars</code><a class="headerlink" href="#vars" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">List of scalars that will be actually output. Note that most scalars are computed anyways.</div>
<div class="line">Omit this argument to include all scalars.</div>
</div>
</dd></dl>

<dl class="data">
<dt id="precision">
<code class="descname">precision</code><a class="headerlink" href="#precision" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">10</td>
</tr>
</tbody>
</table>
<p>Number of digits of the outputs.</p>
</dd></dl>

<p>The full list of scalars that are saved by this diagnostic:</p>
<table border="1" class="nowrap docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2"><strong>Global energies</strong></td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Utot</div>
<div class="line">Ukin</div>
<div class="line">Uelm</div>
<div class="line">Uexp</div>
<div class="line">Ubal</div>
<div class="line">Ubal_norm</div>
<div class="line">Uelm_Ex</div>
<div class="line"><br /></div>
<div class="line">Urad</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Total energy</div>
<div class="line">Total kinetic energy (in the particles)</div>
<div class="line">Total EM energy (in the fields)</div>
<div class="line">Expected value (Initial energy <span class="math notranslate">\(-\)</span> lost <span class="math notranslate">\(+\)</span> gained)</div>
<div class="line">Energy balance (Utot <span class="math notranslate">\(-\)</span> Uexp)</div>
<div class="line">Normalized energy balance (Ubal <span class="math notranslate">\(/\)</span> Utot)</div>
<div class="line">Energy in Ex field (<span class="math notranslate">\(\int E_x^2 dV /2\)</span>)</div>
<div class="line-block">
<div class="line">… and idem for fields Ey, Ez, Bx_m, By_m and Bz_m</div>
</div>
<div class="line">Total radiated energy</div>
</div>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><strong>Energies lost/gained at boundaries</strong></td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Ukin_bnd</div>
<div class="line">Uelm_bnd</div>
<div class="line">Ukin_out_mvw</div>
<div class="line">Ukin_inj_mvw</div>
<div class="line">Uelm_out_mvw</div>
<div class="line">Uelm_inj_mvw</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Kinetic energy exchanged at the boundaries during the timestep</div>
<div class="line">EM energy exchanged at boundaries during the timestep</div>
<div class="line">Kinetic energy lost during the timestep due to the moving window</div>
<div class="line">Kinetic energy injected during the timestep due to the moving window</div>
<div class="line">EM energy lost during the timestep due to the moving window</div>
<div class="line">EM energy injected during the timestep due to the moving window</div>
</div>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><strong>Species information</strong></td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Dens_abc</div>
<div class="line">Zavg_abc</div>
<div class="line">Ukin_abc</div>
<div class="line">Urad_abc</div>
<div class="line">Ntot_abc</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Average density of species “abc”</div>
<div class="line-block">
<div class="line">… its average charge</div>
<div class="line">… its total kinetic energy</div>
<div class="line">… its total radiated energy</div>
<div class="line">… and number of particles</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><strong>Fields information</strong></td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ExMin</div>
<div class="line">ExMinCell</div>
<div class="line">ExMax</div>
<div class="line">ExMaxCell</div>
<div class="line"><br /></div>
<div class="line">PoyXmin</div>
<div class="line">PoyXminInst</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Minimum of <span class="math notranslate">\(E_x\)</span></div>
<div class="line-block">
<div class="line">… and its location (cell index)</div>
</div>
<div class="line">Maximum of <span class="math notranslate">\(E_x\)</span></div>
<div class="line-block">
<div class="line">… and its location (cell index)</div>
</div>
<div class="line">… same for fields Ey Ez Bx_m By_m Bz_m Jx Jy Jz Rho</div>
<div class="line">Accumulated Poynting flux through xmin boundary</div>
<div class="line">Current Poynting flux through xmin boundary</div>
<div class="line-block">
<div class="line">… same for other boundaries</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Checkout the <a class="reference internal" href="post-processing.html"><span class="doc">post-processing</span></a> documentation as well.</p>
<hr class="docutils" />
</div>
<div class="section" id="fields-diagnostics">
<span id="diagfields"></span><h2><em>Fields</em> diagnostics<a class="headerlink" href="#fields-diagnostics" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">Smilei</strong> can collect various field data (electromagnetic fields, currents and density)
taken at the location of the PIC grid, both as instantaneous values and averaged values.
This is done by including a block <code class="docutils literal notranslate"><span class="pre">DiagFields</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagFields</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Ez&quot;</span><span class="p">],</span>
    <span class="c1">#subgrid = None</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><p>Number of timesteps between each output <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt id="flush_every">
<code class="descname">flush_every</code><a class="headerlink" href="#flush_every" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <cite>flush_every</cite> coincides with <cite>every</cite>, the output
file is actually written (“flushed” from the buffer). Flushing
too often can <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<dl class="data">
<dt id="time_average">
<code class="descname">time_average</code><a class="headerlink" href="#time_average" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">1</span></code> <em>(no averaging)</em></td>
</tr>
</tbody>
</table>
<p>The number of timesteps for time-averaging.</p>
</dd></dl>

<dl class="data">
<dt id="fields">
<code class="descname">fields</code><a class="headerlink" href="#fields" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[]</span></code> <em>(all fields are written)</em></td>
</tr>
</tbody>
</table>
<p>List of the field names that are saved. By default, they all are.
The full list of fields that are saved by this diagnostic:</p>
<table border="1" class="nowrap docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Bx</div>
<div class="line">By</div>
<div class="line">Bz</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line">Components of the magnetic field</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Bx_m</div>
<div class="line">By_m</div>
<div class="line">Bz_m</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line">Components of the magnetic field (time-centered)</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Ex</div>
<div class="line">Ey</div>
<div class="line">Ez</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line">Components of the electric field</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Jx</div>
<div class="line">Jy</div>
<div class="line">Jz</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line">Components of the total current</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Jx_abc</div>
<div class="line">Jy_abc</div>
<div class="line">Jz_abc</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line">Components of the current due to species “abc”</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Rho</div>
<div class="line">Rho_abc</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Total density</div>
<div class="line">Density of species “abc”</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="subgrid">
<code class="descname">subgrid</code><a class="headerlink" href="#subgrid" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code> <em>(the whole grid is used)</em></td>
</tr>
</tbody>
</table>
<p>A list of slices indicating a portion of the simulation grid to be written by this
diagnostic. This list must have as many elements as the simulation dimension.
For example, in a 3D simulation, the list has 3 elements. Each element can be:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">None</span></code>, to select the whole grid along that dimension</li>
<li>an integer, to select only the corresponding cell index along that dimension</li>
<li>a <em>python</em> <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice">slice object</a>
to select regularly-spaced cell indices along that dimension.</li>
</ul>
<p>This can be easily implemented using the
<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.s_.html">numpy.s_ expression</a>.
For instance, in a 3D simulation, the following subgrid selects only every other element
in each dimension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">s_</span>
<span class="n">DiagFields</span><span class="p">(</span> <span class="c1">#...</span>
    <span class="n">subgrid</span> <span class="o">=</span> <span class="n">s_</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>while this one selects cell indices included in a contiguous parallelepiped:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subgrid</span> <span class="o">=</span> <span class="n">s_</span><span class="p">[</span><span class="mi">100</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span><span class="mi">600</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="probe-diagnostics">
<span id="diagprobe"></span><h2><em>Probe</em> diagnostics<a class="headerlink" href="#probe-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>The fields from the previous section are taken at the PIC grid locations,
but it is also possible to obtain the fields at arbitrary locations.
These are called <em>probes</em>.</p>
<p>A probe interpolates the fields at either one point (0-D),
several points arranged in a line (1-D),
or several points arranged in a 2-D or 3-D grid.</p>
<p>To add one probe diagnostic, include the block <code class="docutils literal notranslate"><span class="pre">DiagProbe</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagProbe</span><span class="p">(</span>
    <span class="n">every</span>    <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">origin</span>   <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
    <span class="n">corners</span>  <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">10.</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">10.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="n">number</span>   <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="n">fields</span>   <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Ez&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><p>Number of timesteps between each output <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">flush_every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <cite>flush_every</cite> coincides with <cite>every</cite>, the output
file is actually written (“flushed” from the buffer). Flushing
too often can <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<dl class="data">
<dt id="origin">
<code class="descname">origin</code><a class="headerlink" href="#origin" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of floats, of length equal to the simulation dimensionality.</td>
</tr>
</tbody>
</table>
<p>The coordinates of the origin of the probe grid</p>
</dd></dl>

<dl class="data">
<dt id="corners">
<code class="descname">corners</code><a class="headerlink" href="#corners" title="Permalink to this definition">¶</a></dt>
<dt id="vectors">
<code class="descname">vectors</code><a class="headerlink" href="#vectors" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of lists of floats.</td>
</tr>
</tbody>
</table>
<p>Defines the corners of the probe grid.
Each corner is a list of coordinates (as many as the simulation dimensions).</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">corners</span></code>, the absolute coordinates of each corner must be specified.
When using <code class="docutils literal notranslate"><span class="pre">vectors</span></code>, the coordinates relative to <a class="reference internal" href="#origin" title="origin"><code class="xref py py-data docutils literal notranslate"><span class="pre">origin</span></code></a> must be specified.</p>
</dd></dl>

<dl class="data">
<dt id="number">
<code class="descname">number</code><a class="headerlink" href="#number" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of integers, one for each dimension of the probe.</td>
</tr>
</tbody>
</table>
<p>The number of points in each probe axis. Must not be defined for a 0-D probe.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">fields</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[]</span></code> (all fields)</td>
</tr>
</tbody>
</table>
<p>A list of fields among <code class="docutils literal notranslate"><span class="pre">&quot;Ex&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ey&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ez&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;Bx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;By&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Bz&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Jx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Jy&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Jz&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Rho&quot;</span></code>. Only these
fields will be saved.
Note that it does NOT speed up calculation much, but it saves disk space.</p>
</dd></dl>

<p><strong>Examples of probe diagnostics</strong></p>
<ul>
<li><p class="first">0-D probe in 1-D simulation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagProbe</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">origin</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.2</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">1-D probe in 1-D simulation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagProbe</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">origin</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">1.2</span><span class="p">],</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">5.6</span><span class="p">]],</span>
    <span class="n">number</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">1-D probe in 2-D simulation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagProbe</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">origin</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">4.</span><span class="p">],</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">5.6</span><span class="p">,</span> <span class="mf">4.</span><span class="p">]],</span>
    <span class="n">number</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">2-D probe in 2-D simulation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagProbe</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">origin</span>   <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
    <span class="n">corners</span>  <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mf">10.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">10.</span><span class="p">]</span> <span class="p">],</span>
    <span class="n">number</span>   <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="particlebinning-diagnostics">
<span id="diagparticlebinning"></span><h2><em>ParticleBinning</em> diagnostics<a class="headerlink" href="#particlebinning-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>A <em>particle binning diagnostic</em> collects data from the macro-particles and processes them during runtime.
It does not provide information on individual particles: instead, it produces
<strong>averaged quantities</strong> like the particle density, currents, etc.</p>
<p>The data is discretized inside a “grid” chosen by the user. This grid may be of any dimension.</p>
<p>Examples:</p>
<ul class="simple">
<li>1-dimensional grid along the position <span class="math notranslate">\(x\)</span> (gives density variation along <span class="math notranslate">\(x\)</span>)</li>
<li>2-dimensional grid along positions <span class="math notranslate">\(x\)</span> and <span class="math notranslate">\(y\)</span> (gives density map)</li>
<li>1-dimensional grid along the velocity <span class="math notranslate">\(v_x\)</span> (gives the velocity distribution)</li>
<li>2-dimensional grid along position <span class="math notranslate">\(x\)</span> and momentum <span class="math notranslate">\(p_x\)</span> (gives the phase-space)</li>
<li>1-dimensional grid along the kinetic energy <span class="math notranslate">\(E_\mathrm{kin}\)</span> (gives the energy distribution)</li>
<li>3-dimensional grid along <span class="math notranslate">\(x\)</span>, <span class="math notranslate">\(y\)</span> and <span class="math notranslate">\(E_\mathrm{kin}\)</span> (gives the density map for several energies)</li>
<li>1-dimensional grid along the charge <span class="math notranslate">\(Z^\star\)</span> (gives the charge distribution)</li>
<li>0-dimensional grid (simply gives the total integrated particle density)</li>
</ul>
<p>Each dimension of the grid is called “axis”.</p>
<p>You can add a particle binning diagnostic by including a block <code class="docutils literal notranslate"><span class="pre">DiagParticleBinning()</span></code> in the namelist,
for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electrons1&quot;</span><span class="p">,</span> <span class="s2">&quot;electrons2&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;ekin&quot;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;logscale&quot;</span><span class="p">,</span> <span class="s2">&quot;edge_inclusive&quot;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="deposited_quantity">
<code class="descname">deposited_quantity</code><a class="headerlink" href="#deposited_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of data that is summed in each cell of the grid.
Consider reading <a class="reference internal" href="units.html#weights"><span class="std std-ref">this</span></a> to understand the meaning of the <code class="docutils literal notranslate"><span class="pre">weight</span></code>.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight&quot;</span></code> results in a number density.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_charge&quot;</span></code> results in a charge density.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_charge_vx&quot;</span></code> results in the <span class="math notranslate">\(j_x\)</span> current density (same with <span class="math notranslate">\(y\)</span> and <span class="math notranslate">\(z\)</span>).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_p&quot;</span></code> results in the momentum density (same with <span class="math notranslate">\(p_x\)</span>, <span class="math notranslate">\(p_y\)</span> and <span class="math notranslate">\(p_z\)</span>).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_ekin&quot;</span></code> results in the energy density.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_vx_px&quot;</span></code> results in the <code class="docutils literal notranslate"><span class="pre">xx</span></code> pressure (same with yy, zz, xy, yz and xz).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;weight_chi&quot;</span></code> results in the quantum parameter density (only for species with radiation losses).</p>
</li>
<li><p class="first">with a user-defined python function, an arbitrary quantity can be calculated (the <em>numpy</em>
module is necessary). This function should take one argument, for instance
<code class="docutils literal notranslate"><span class="pre">particles</span></code>, which contains the attributes <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>, <code class="docutils literal notranslate"><span class="pre">px</span></code>, <code class="docutils literal notranslate"><span class="pre">py</span></code>,
<code class="docutils literal notranslate"><span class="pre">pz</span></code>, <code class="docutils literal notranslate"><span class="pre">charge</span></code>, <code class="docutils literal notranslate"><span class="pre">weight</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code>. Each of these attributes is a <em>numpy</em> array
containing the data of all particles in one patch. The function must return a <em>numpy</em>
array of the same shape, containing the desired deposition of each particle. For example,
defining the following function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">stuff</span><span class="p">(</span><span class="n">particles</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">particles</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">particles</span><span class="o">.</span><span class="n">px</span>
</pre></div>
</div>
<p>passed as <code class="docutils literal notranslate"><span class="pre">deposited_quantity=stuff</span></code>, the diagnostic will sum the weights
<span class="math notranslate">\(\times\; p_x\)</span>.</p>
<p>You may also pass directly an implicit (<em>lambda</em>) function using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deposited_quantity</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">px</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><p>The number of time-steps between each output, <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">flush_every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <cite>flush_every</cite> coincides with <cite>every</cite>, the output
file is actually written (“flushed” from the buffer). Flushing
too often can <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">time_average</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>The number of time-steps during which the data is averaged before output.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">species</code></dt>
<dd><p>A list of one or several species’ <a class="reference internal" href="#name" title="name"><code class="xref py py-data docutils literal notranslate"><span class="pre">name</span></code></a>.
All these species are combined into the same diagnostic.</p>
</dd></dl>

<dl class="data">
<dt id="axes">
<code class="descname">axes</code><a class="headerlink" href="#axes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of “axes” that define the grid.
There may be as many axes as wanted (there may be zero axes).</p>
<p>Syntax of one axis: <code class="docutils literal notranslate"><span class="pre">[type,</span> <span class="pre">min,</span> <span class="pre">max,</span> <span class="pre">nsteps,</span> <span class="pre">&quot;logscale&quot;,</span> <span class="pre">&quot;edge_inclusive&quot;]</span></code></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">type</span></code> is one of:<ul>
<li><code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;y&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;z&quot;</span></code>: spatial coordinates (<code class="docutils literal notranslate"><span class="pre">&quot;moving_x&quot;</span></code> with a <a class="reference internal" href="#movingwindow"><span class="std std-ref">moving window</span></a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;px&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;py&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;pz&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;p&quot;</span></code>: momenta</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;vx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;vy&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;vz&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;v&quot;</span></code>: velocities</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;gamma&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ekin&quot;</span></code>: energies</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;chi&quot;</span></code>: quantum parameter</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;charge&quot;</span></code>: the particles’ electric charge</li>
<li>or a <em>python function</em> with the same syntax as the <code class="docutils literal notranslate"><span class="pre">deposited_quantity</span></code>.
Namely, this function must accept one argument only, for instance <code class="docutils literal notranslate"><span class="pre">particles</span></code>,
which holds the attributes <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>, <code class="docutils literal notranslate"><span class="pre">px</span></code>, <code class="docutils literal notranslate"><span class="pre">py</span></code>, <code class="docutils literal notranslate"><span class="pre">pz</span></code>, <code class="docutils literal notranslate"><span class="pre">charge</span></code>,
<code class="docutils literal notranslate"><span class="pre">weight</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code>. Each of these attributes is a <em>numpy</em> array containing the
data of all particles in one patch. The function must return a <em>numpy</em> array of
the same shape, containing the desired quantity of each particle that will decide
its location in the histogram binning.</li>
</ul>
</li>
<li>The axis is discretized for <code class="docutils literal notranslate"><span class="pre">type</span></code> from <code class="docutils literal notranslate"><span class="pre">min</span></code> to <code class="docutils literal notranslate"><span class="pre">max</span></code> in <code class="docutils literal notranslate"><span class="pre">nsteps</span></code> bins.</li>
<li>The optional keyword <code class="docutils literal notranslate"><span class="pre">logscale</span></code> sets the axis scale to logarithmic instead of linear.</li>
<li>The optional keyword <code class="docutils literal notranslate"><span class="pre">edge_inclusive</span></code> includes the particles outside the range
[<code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>] into the extrema bins.</li>
</ul>
</dd></dl>

<p><strong>Examples of particle binning diagnostics</strong></p>
<ul>
<li><p class="first">Variation of the density of species <code class="docutils literal notranslate"><span class="pre">electron1</span></code>
from <span class="math notranslate">\(x=0\)</span> to 1, every 5 time-steps, without time-averaging</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Density map from <span class="math notranslate">\(x=0\)</span> to 1, <span class="math notranslate">\(y=0\)</span> to 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">],</span>
             <span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Velocity distribution from <span class="math notranslate">\(v_x = -0.1\)</span> to <span class="math notranslate">\(0.1\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;vx&quot;</span><span class="p">,</span>   <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span>    <span class="mf">0.1</span><span class="p">,</span>    <span class="mi">100</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Phase space from <span class="math notranslate">\(x=0\)</span> to 1 and from <span class="math notranslate">\(px=-1\)</span> to 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">],</span>
             <span class="p">[</span><span class="s2">&quot;px&quot;</span><span class="p">,</span>   <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>    <span class="mi">100</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Energy distribution from 0.01 to 1 MeV in logarithmic scale.
Note that the input units are <span class="math notranslate">\(m_ec^2 \sim 0.5\)</span> MeV</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;ekin&quot;</span><span class="p">,</span>    <span class="mf">0.02</span><span class="p">,</span>    <span class="mf">2.</span><span class="p">,</span>   <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;logscale&quot;</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><span class="math notranslate">\(x\)</span>-<span class="math notranslate">\(y\)</span> density maps for three bands of energy: <span class="math notranslate">\([0,1]\)</span>, <span class="math notranslate">\([1,2]\)</span>, <span class="math notranslate">\([2,\infty]\)</span>.
Note the use of <code class="docutils literal notranslate"><span class="pre">edge_inclusive</span></code> to reach energies up to <span class="math notranslate">\(\infty\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">],</span>
             <span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">,</span>    <span class="mf">0.</span><span class="p">,</span>    <span class="mf">1.</span><span class="p">,</span>    <span class="mi">30</span><span class="p">],</span>
             <span class="p">[</span><span class="s2">&quot;ekin&quot;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span>    <span class="mf">6.</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>  <span class="s2">&quot;edge_inclusive&quot;</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Charge distribution from <span class="math notranslate">\(Z^\star =0\)</span> to 10</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagParticleBinning</span><span class="p">(</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">time_average</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron1&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;charge&quot;</span><span class="p">,</span>    <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span>   <span class="mf">10.5</span><span class="p">,</span>   <span class="mi">11</span><span class="p">]</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="screen-diagnostics">
<span id="diagscreen"></span><h2><em>Screen</em> diagnostics<a class="headerlink" href="#screen-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>A <em>screen</em> collects data from the macro-particles when they cross a surface.
It processes this data similarly to the <a class="reference internal" href="#diagparticlebinning"><span class="std std-ref">particle binning diagnostics</span></a>
as it makes a histogram of the macro-particle properties. The only difference is
that the histogram is made only by the particles that cross the surface.</p>
<p>You can add a screen by including a block <code class="docutils literal notranslate"><span class="pre">DiagScreen()</span></code> in the namelist,
for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagScreen</span><span class="p">(</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;plane&quot;</span><span class="p">,</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">],</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
    <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;canceling&quot;</span><span class="p">,</span>
    <span class="n">deposited_quantity</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span>
    <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;electron&quot;</span><span class="p">],</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.</span><span class="o">*</span><span class="n">l0</span><span class="p">,</span> <span class="mf">10.</span><span class="o">*</span><span class="n">l0</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mi">30</span><span class="p">]],</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">10</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="shape">
<code class="descname">shape</code><a class="headerlink" href="#shape" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape of the screen surface: <code class="docutils literal notranslate"><span class="pre">&quot;plane&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;sphere&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="point">
<code class="descname">point</code><a class="headerlink" href="#point" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of floats <code class="docutils literal notranslate"><span class="pre">[X]</span></code> in 1D,  <code class="docutils literal notranslate"><span class="pre">[X,Y]</span></code> in 2D,  <code class="docutils literal notranslate"><span class="pre">[X,Y,Z]</span></code> in 3D</td>
</tr>
</tbody>
</table>
<p>The coordinates of a point that defines the screen surface:
a point of the <code class="docutils literal notranslate"><span class="pre">&quot;plane&quot;</span></code> or the center of the <code class="docutils literal notranslate"><span class="pre">&quot;sphere&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="vector">
<code class="descname">vector</code><a class="headerlink" href="#vector" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">A list of floats <code class="docutils literal notranslate"><span class="pre">[X]</span></code> in 1D,  <code class="docutils literal notranslate"><span class="pre">[X,Y]</span></code> in 2D,  <code class="docutils literal notranslate"><span class="pre">[X,Y,Z]</span></code> in 3D</td>
</tr>
</tbody>
</table>
<p>The coordinates of a vector that defines the screen surface:
the normal to the <code class="docutils literal notranslate"><span class="pre">&quot;plane&quot;</span></code> or a radius of the <code class="docutils literal notranslate"><span class="pre">&quot;sphere&quot;</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="direction">
<code class="descname">direction</code><a class="headerlink" href="#direction" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">&quot;both&quot;</span></code></td>
</tr>
</tbody>
</table>
<p>Determines how particles are counted depending on which side of the screen they come from.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;both&quot;</span></code> to account for both sides.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;forward&quot;</span></code> for only the ones in the direction of the <code class="docutils literal notranslate"><span class="pre">vector</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;backward&quot;</span></code> for only the ones in the opposite direction.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;canceling&quot;</span></code> to count negatively the ones in the opposite direction.</li>
</ul>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">deposited_quantity</code></dt>
<dd><p>Identical to the <code class="docutils literal notranslate"><span class="pre">deposited_quantity</span></code> of <a class="reference internal" href="#diagparticlebinning"><span class="std std-ref">particle binning diagnostics</span></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><p>The number of time-steps between each output, <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">flush_every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <cite>flush_every</cite> coincides with <cite>every</cite>, the output
file is actually written (“flushed” from the buffer). Flushing
too often can <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">species</code></dt>
<dd><p>A list of one or several species’ <a class="reference internal" href="#name" title="name"><code class="xref py py-data docutils literal notranslate"><span class="pre">name</span></code></a>.
All these species are combined into the same diagnostic.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">axes</code></dt>
<dd><p>A list of “axes” that define the grid of the histogram.
It is identical to that of <a class="reference internal" href="#diagparticlebinning"><span class="std std-ref">particle binning diagnostics</span></a>, with the
addition of four types of axes:</p>
<ul class="simple">
<li>If <code class="docutils literal notranslate"><span class="pre">shape=&quot;plane&quot;</span></code>, then <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code> are the axes perpendicular to the <code class="docutils literal notranslate"><span class="pre">vector</span></code>.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">shape=&quot;sphere&quot;</span></code>, then <code class="docutils literal notranslate"><span class="pre">&quot;theta&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;phi&quot;</span></code> are the angles with respect to the <code class="docutils literal notranslate"><span class="pre">vector</span></code>.</li>
</ul>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="trackparticles-diagnostics">
<span id="diagtrackparticles"></span><h2><em>TrackParticles</em> diagnostics<a class="headerlink" href="#trackparticles-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>A <em>particle tracking diagnostic</em> records the macro-particle positions and momenta at various timesteps.
Typically, this is used for plotting trajectories.</p>
<p>You can add a tracking diagnostic by including a block <code class="docutils literal notranslate"><span class="pre">DiagTrackParticles()</span></code> in the namelist,
for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagTrackParticles</span><span class="p">(</span>
    <span class="n">species</span> <span class="o">=</span> <span class="s2">&quot;electron&quot;</span><span class="p">,</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="c1">#    flush_every = 100,</span>
<span class="c1">#    filter = my_filter,</span>
<span class="c1">#    attributes = [&quot;x&quot;, &quot;px&quot;, &quot;py&quot;, &quot;Ex&quot;, &quot;Ey&quot;, &quot;Bz&quot;]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">species</code></dt>
<dd><p>The <a class="reference internal" href="#name" title="name"><code class="xref py py-data docutils literal notranslate"><span class="pre">name</span></code></a> of the species to be tracked.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0</td>
</tr>
</tbody>
</table>
<p>Number of timesteps between each output of particles trajectories, <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.
If non-zero, the particles positions will be tracked and written in a file named <code class="docutils literal notranslate"><span class="pre">TrackParticlesDisordered_abc.h5</span></code>
(where <code class="docutils literal notranslate"><span class="pre">abc</span></code> is the species’ <a class="reference internal" href="#name" title="name"><code class="xref py py-data docutils literal notranslate"><span class="pre">name</span></code></a>).</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">flush_every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">flush_every</span></code> coincides with <code class="docutils literal notranslate"><span class="pre">every</span></code>, the output
file for tracked particles is actually written (“flushed” from the buffer). Flushing
too often can <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<dl class="data">
<dt id="filter">
<code class="descname">filter</code><a class="headerlink" href="#filter" title="Permalink to this definition">¶</a></dt>
<dd><p>A python function giving some condition on which particles are tracked.
If none provided, all particles are tracked.
To use this option, the <a class="reference external" href="http://www.numpy.org/">numpy package</a> must
be available in your python installation.</p>
<p>The function must have one argument, that you may call, for instance, <code class="docutils literal notranslate"><span class="pre">particles</span></code>.
This object has several attributes <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>, <code class="docutils literal notranslate"><span class="pre">px</span></code>, <code class="docutils literal notranslate"><span class="pre">py</span></code>, <code class="docutils literal notranslate"><span class="pre">pz</span></code>, <code class="docutils literal notranslate"><span class="pre">charge</span></code>,
<code class="docutils literal notranslate"><span class="pre">weight</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code>. Each of these attributes
are provided as <strong>numpy</strong> arrays where each cell corresponds to one particle.
The function must return a boolean <strong>numpy</strong> array of the same shape, containing <code class="docutils literal notranslate"><span class="pre">True</span></code>
for particles that should be tracked, and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<p>The following example selects all the particles that verify <span class="math notranslate">\(-1&lt;p_x&lt;1\)</span>
or <span class="math notranslate">\(p_z&gt;3\)</span>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_filter</span><span class="p">(</span><span class="n">particles</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">particles</span><span class="o">.</span><span class="n">px</span><span class="o">&gt;-</span><span class="mf">1.</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">particles</span><span class="o">.</span><span class="n">px</span><span class="o">&lt;</span><span class="mf">1.</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">particles</span><span class="o">.</span><span class="n">pz</span><span class="o">&gt;</span><span class="mf">3.</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">id</span></code> attribute contains the <a class="reference internal" href="ids.html"><span class="doc">particles identification number</span></a>.
This number is set to 0 at the beginning of the simulation. <strong>Only after particles have
passed the filter</strong>, they acquire a positive <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For advanced filtration, Smilei provides the quantity <code class="docutils literal notranslate"><span class="pre">Main.iteration</span></code>,
accessible within the <code class="docutils literal notranslate"><span class="pre">filter</span></code> function. Its value is always equal to the current
iteration number of the PIC loop. The current time of the simulation is thus
<code class="docutils literal notranslate"><span class="pre">Main.iteration</span> <span class="pre">*</span> <span class="pre">Main.timestep</span></code>.</p>
</div>
<dl class="data">
<dt id="attributes">
<code class="descname">attributes</code><a class="headerlink" href="#attributes" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;px&quot;,&quot;py&quot;,&quot;pz&quot;]</span></code></td>
</tr>
</tbody>
</table>
<p>A list of strings indicating the particle attributes to be written in the output.
The attributes may be the particles’ spatial coordinates (<code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;y&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;z&quot;</span></code>),
their momenta (<code class="docutils literal notranslate"><span class="pre">&quot;px&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;py&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;pz&quot;</span></code>), their electrical charge (<code class="docutils literal notranslate"><span class="pre">&quot;q&quot;</span></code>),
their statistical weight (<code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code>), their quantum parameter
(<code class="docutils literal notranslate"><span class="pre">&quot;chi&quot;</span></code>, only for species with radiation losses) or the fields interpolated
at their  positions (<code class="docutils literal notranslate"><span class="pre">&quot;Ex&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ey&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Ez&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Bx&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;By&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Bz&quot;</span></code>).</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="performances-diagnostics">
<span id="diagperformances"></span><h2><em>Performances</em> diagnostics<a class="headerlink" href="#performances-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>The <em>performances</em> diagnostic records information on the computational load and timers
for each MPI process in the simulation.</p>
<p>Only one block <code class="docutils literal notranslate"><span class="pre">DiagPerformances()</span></code> may be added in the namelist, for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiagPerformances</span><span class="p">(</span>
    <span class="n">every</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="c1">#    flush_every = 100,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt>
<code class="descname">every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0</td>
</tr>
</tbody>
</table>
<p>Number of timesteps between each output, <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">flush_every</code></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">1</td>
</tr>
</tbody>
</table>
<p>Number of timesteps <strong>or</strong> a <a class="reference internal" href="#timeselections"><span class="std std-ref">time selection</span></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">flush_every</span></code> coincides with <code class="docutils literal notranslate"><span class="pre">every</span></code>, the output file is actually written
(“flushed” from the buffer). Flushing too often might <em>dramatically</em> slow down the simulation.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="time-selections">
<span id="timeselections"></span><h2>Time selections<a class="headerlink" href="#time-selections" title="Permalink to this headline">¶</a></h2>
<p>Several components (mainly diagnostics) may require a selection of timesteps to
be chosen by the user. When one of these timesteps is reached, the diagnostics will
output data. A time selection is given through the parameter <code class="docutils literal notranslate"><span class="pre">every</span></code> and is a list
of several numbers.</p>
<p>You may chose between five different syntaxes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">every</span> <span class="o">=</span> <span class="p">[</span>               <span class="n">period</span>                    <span class="p">]</span> <span class="c1"># Syntax 1</span>
<span class="n">every</span> <span class="o">=</span> <span class="p">[</span>       <span class="n">start</span><span class="p">,</span>  <span class="n">period</span>                    <span class="p">]</span> <span class="c1"># Syntax 2</span>
<span class="n">every</span> <span class="o">=</span> <span class="p">[</span> <span class="n">start</span><span class="p">,</span>  <span class="n">end</span><span class="p">,</span>  <span class="n">period</span>                    <span class="p">]</span> <span class="c1"># Syntax 3</span>
<span class="n">every</span> <span class="o">=</span> <span class="p">[</span> <span class="n">start</span><span class="p">,</span>  <span class="n">end</span><span class="p">,</span>  <span class="n">period</span><span class="p">,</span>  <span class="n">repeat</span>           <span class="p">]</span> <span class="c1"># Syntax 4</span>
<span class="n">every</span> <span class="o">=</span> <span class="p">[</span> <span class="n">start</span><span class="p">,</span>  <span class="n">end</span><span class="p">,</span>  <span class="n">period</span><span class="p">,</span>  <span class="n">repeat</span><span class="p">,</span>  <span class="n">spacing</span> <span class="p">]</span> <span class="c1"># Syntax 5</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">start</span></code> is the first timestep of the selection (defaults to 0);</li>
<li><code class="docutils literal notranslate"><span class="pre">end</span></code> is the last timestep of the selection (defaults to ∞);</li>
<li><code class="docutils literal notranslate"><span class="pre">period</span></code> is the separation between outputs (defaults to 1);</li>
<li><code class="docutils literal notranslate"><span class="pre">repeat</span></code> indicates how many outputs to do at each period (defaults to 1);</li>
<li><code class="docutils literal notranslate"><span class="pre">spacing</span></code> is the separation between each repeat (defaults to 1).</li>
</ul>
<p>For more clarity, this graph illustrates the five syntaxes for time selections:</p>
<a class="reference internal image-reference" href="_images/TimeSelections.png"><img alt="_images/TimeSelections.png" class="align-center" src="_images/TimeSelections.png" style="width: 33em;" /></a>
<div class="admonition-tips admonition">
<p class="first admonition-title">Tips</p>
<ul class="last simple">
<li>The syntax <code class="docutils literal notranslate"><span class="pre">every</span> <span class="pre">=</span> <span class="pre">period</span></code> is also accepted.</li>
<li>Any value set to <code class="docutils literal notranslate"><span class="pre">0</span></code> will be replaced by the default value.</li>
<li>Special case: <code class="docutils literal notranslate"><span class="pre">every=0</span></code> means no output.</li>
<li>The numbers may be non-integers (apart from <code class="docutils literal notranslate"><span class="pre">repeat</span></code>). The closest timesteps are chosen.</li>
</ul>
</div>
<hr class="docutils" />
</div>
<div class="section" id="checkpoints">
<span id="id5"></span><h2>Checkpoints<a class="headerlink" href="#checkpoints" title="Permalink to this headline">¶</a></h2>
<p>The simulation state can be saved (<em>dumped</em>) at given times (<em>checkpoints</em>)
in order to be later <em>restarted</em> at that point.</p>
<p>A few things are important to know when you need dumps and restarts.</p>
<ul class="simple">
<li>Do not restart the simulation in the same directory as the previous one. Files will be
overwritten, and errors may occur. Create a new directory for your restarted simulation.</li>
<li>Manage your memory: each MPI process dumps one file, and the total can be significant.</li>
<li>The file written by a particular MPI process has the format
<code class="docutils literal notranslate"><span class="pre">dump-XXXXX-YYYYYYYYYY.h5</span></code> where <code class="docutils literal notranslate"><span class="pre">XXXXX</span></code> is the <em>dump number</em> that can be chosen
using <a class="reference internal" href="#restart_number" title="restart_number"><code class="xref py py-data docutils literal notranslate"><span class="pre">restart_number</span></code></a> and <code class="docutils literal notranslate"><span class="pre">YYYYYYYYYY</span></code> is the MPI process number.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Checkpoints</span><span class="p">(</span>
    <span class="n">restart_dir</span> <span class="o">=</span> <span class="s2">&quot;dump1&quot;</span><span class="p">,</span>
    <span class="n">dump_step</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="n">dump_minutes</span> <span class="o">=</span> <span class="mf">240.</span><span class="p">,</span>
    <span class="n">dump_deflate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">exit_after_dump</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">keep_n_dumps</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="data">
<dt id="restart_dir">
<code class="descname">restart_dir</code><a class="headerlink" href="#restart_dir" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p>The directory of a previous simulation from which <strong class="program">Smilei</strong> should restart.
If not defined, it does not restart from a previous simulation.</p>
<p><strong>WARNING:</strong> this path must either absolute or be relative to the current directory.</p>
</dd></dl>

<dl class="data">
<dt id="restart_number">
<code class="descname">restart_number</code><a class="headerlink" href="#restart_number" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p>The number of the dump (from the previous run in <a class="reference internal" href="#restart_dir" title="restart_dir"><code class="xref py py-data docutils literal notranslate"><span class="pre">restart_dir</span></code></a>)
that should be used for the restart.
Note that the dump number is reset to 0 for each new run. In a given run, the first dump has
number 0, the second dump number 1, etc.</p>
</dd></dl>

<dl class="data">
<dt id="dump_step">
<code class="descname">dump_step</code><a class="headerlink" href="#dump_step" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">0</td>
</tr>
</tbody>
</table>
<p>The number of timesteps between each dump of the full simulation.
If <code class="docutils literal notranslate"><span class="pre">0</span></code>, no dump is done.</p>
</dd></dl>

<dl class="data">
<dt id="dump_minutes">
<code class="descname">dump_minutes</code><a class="headerlink" href="#dump_minutes" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The number of minutes between each dump of the full simulation (combines with
<a class="reference internal" href="#dump_step" title="dump_step"><code class="xref py py-data docutils literal notranslate"><span class="pre">dump_step</span></code></a>).
If <code class="docutils literal notranslate"><span class="pre">0.</span></code>, no dump is done.</p>
</dd></dl>

<dl class="data">
<dt id="dump_deflate">
<code class="descname">dump_deflate</code><a class="headerlink" href="#dump_deflate" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="red">to do</span></p>
</dd></dl>

<dl class="data">
<dt id="exit_after_dump">
<code class="descname">exit_after_dump</code><a class="headerlink" href="#exit_after_dump" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">True</span></code></td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the code stops after the first dump.</p>
</dd></dl>

<dl class="data">
<dt id="keep_n_dumps">
<code class="descname">keep_n_dumps</code><a class="headerlink" href="#keep_n_dumps" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">2</td>
</tr>
</tbody>
</table>
<p>This tells <strong class="program">Smilei</strong> to keep the last <code class="docutils literal notranslate"><span class="pre">n</span></code> dumps for a later restart.
The default value, 2, saves one extra dump in case of a crash during the file dump.</p>
</dd></dl>

<dl class="data">
<dt id="file_grouping">
<code class="descname">file_grouping</code><a class="headerlink" href="#file_grouping" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p>The maximum number of checkpoint files that can be stored in one directory.
Subdirectories are created to accomodate for all files.
This is useful on filesystem with a limited number of files per directory.</p>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="variables-defined-by-smilei">
<h2>Variables defined by Smilei<a class="headerlink" href="#variables-defined-by-smilei" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">Smilei</strong> passes the following variables to the python interpreter for use in the
namelist. They should not be re-defined by the user!</p>
<dl class="data">
<dt id="smilei_mpi_rank">
<code class="descname">smilei_mpi_rank</code><a class="headerlink" href="#smilei_mpi_rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The MPI rank of the current process.</p>
</dd></dl>

<dl class="data">
<dt id="smilei_mpi_size">
<code class="descname">smilei_mpi_size</code><a class="headerlink" href="#smilei_mpi_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of MPI processes.</p>
</dd></dl>

<dl class="data">
<dt id="smilei_rand_max">
<code class="descname">smilei_rand_max</code><a class="headerlink" href="#smilei_rand_max" title="Permalink to this definition">¶</a></dt>
<dd><p>The largest random integer.</p>
</dd></dl>

<p>As an example of their use, this script randomizes both python’s
and <strong class="program">Smilei</strong>’s random seeds.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">math</span>
<span class="c1"># reshuffle python random generator</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="n">smilei_mpi_rank</span><span class="p">)</span>
<span class="c1"># get 32bit pseudo random integer to be passed to smilei</span>
<span class="n">random_seed</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">smilei_rand_max</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


        </div></div>
      </div>
    </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="run.html" title="Run"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Install"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Smilei v3.3-453-g459e3616 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
      <div>
      <a href="site.html">Site index</a>
      </div>
      <div>
        Last updated on Mar 06, 2018
      </div>
      
      <div>
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.1</a>
      </div>
      
    </div>
    
    <script type="text/javascript">
        
        var nav = document.getElementById("nav");
        var nav_list = document.getElementById("nav_list");
        var nav_button = document.getElementById("nav_button");
        var smallScreenMenu = document.getElementById("smallScreenMenu");
        var smallScreenMenuButton = document.getElementById("smallScreenMenuButton");
        var searchicon = document.getElementById("searchicon");
        var searchbox  = document.getElementById("searchbox");
        var searchinput= document.getElementById("searchinput");
        var menus = document.getElementsByClassName("menu");
        for( var i=0; i<menus.length; i++ )
            menus[i].active = false;
        
        
        var ul = nav_list.getElementsByTagName("ul")[0], li;
        var keep_nav = false;
        if( ul ) {
            li = ul.firstElementChild;
            if( li ) {
                if( li.getElementsByTagName("ul").length > 0 ) keep_nav = true;
            }
        }
        if( keep_nav ) {
            li.removeChild( li.firstElementChild );
        } else {
            document.getElementById("nav_positioner").removeChild( document.getElementById("nav") );
        }
        
        function navOff() {
            nav_list.style.display = "none";
            nav_button.className = "";
            nav.style.overflowY = "visible";
        }
        
        function toggleNav() {
            for( var i=0; i<menus.length; i++ )
                menuOff( menus[i] );
            if( nav_list.style.display != "inline-block" ) {
                nav_list.style.display = "inline-block";
                nav_button.className = "pushed";
                nav.style.overflowY = "auto";
            } else {
                navOff();
            }
        }
        
        function toggleSmallScreenMenu() {
            if( smallScreenMenu.className != "on" ) {
                smallScreenMenu.className = "on";
                smallScreenMenuButton.className = "pushed";
            } else {
                smallScreenMenu.className = "off";
                smallScreenMenuButton.className = "";
            }
        }
        
        function menuOn( menu ) {
            var divs = menu.getElementsByTagName("div");
            if(nav_list) navOff();
            divs[1].className = "on";
            divs[0].className = "menuButton pushed";
            menu.active = true;
        }
        function menuOff( menu ) {
            var divs = menu.getElementsByTagName("div");
            divs[1].className = "off";
            divs[0].className = "menuButton";
            menu.active = false;
        }
        
        function thisMenuOnly(menu_id) {
            var menu = document.getElementById(menu_id);
            for( var i=0; i<menus.length; i++ )
                if( i!=menu_id )
                    menuOff( menus[i] );
            menuOn( menu );
        }
        
        function toggleMenu(menu_id) {
            var menu = document.getElementById(menu_id);
            if( menu.active ) {
                menuOff( menu );
            } else {
                for( var i=0; i<menus.length; i++ )
                    if( i!=menu_id )
                        menuOff( menus[i] );
                menuOn( menu );
            }
        }
        
        function openSearch() {
            for( var i=0; i<menus.length; i++ ) {
                menuOff( menus[i] );
                menus[i].style.zIndex = "-1";
            }
            searchicon.style.display = "none";
            closesearchicon.style.display = "block";
            searchbox.style.display = "block";
            searchinput.focus();
        }
        
        function closeSearch() {
            searchicon.style.display = "block";
            closesearchicon.style.display = "none";
            searchbox .style.display = "none";
            for( var i=0; i<menus.length; i++ )
                menus[i].style.zIndex = "0";
        }
        
        
        var documentDiv = document.getElementsByClassName("document")[0];
        documentDiv.addEventListener('click', function (event) {
            if(nav_list) navOff();
            for( var i=0; i<menus.length; i++ )
                menuOff( menus[i] );
        });
    </script>
  </body>
</html>